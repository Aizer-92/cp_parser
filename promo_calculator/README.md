# –ü—Ä–æ–º–æ-–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä

–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π PostgreSQL –∏ SQLite.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### PostgreSQL –≤–µ—Ä—Å–∏—è (–æ—Å–Ω–æ–≤–Ω–∞—è)
```bash
# –ó–∞–ø—É—Å–∫ PostgreSQL –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
py main.py
# –û—Ç–∫—Ä—ã—Ç—å: http://localhost:8003
```

### SQLite –≤–µ—Ä—Å–∏—è (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è)
```bash
# –ó–∞–ø—É—Å–∫ SQLite –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
py main_sqlite.py
# –û—Ç–∫—Ä—ã—Ç—å: http://localhost:8003
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–û–±–µ –≤–µ—Ä—Å–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö:

### –¢–∞–±–ª–∏—Ü–∞ `products`
- `id` - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `offer_id` - ID –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
- `title` - –ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞
- `original_title` - –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ
- `description` - –û–ø–∏—Å–∞–Ω–∏–µ
- `price_cny_min/max` - –¶–µ–Ω–∞ –≤ CNY (–º–∏–Ω/–º–∞–∫—Å)
- `price_rub_min/max` - –¶–µ–Ω–∞ –≤ RUB (–º–∏–Ω/–º–∞–∫—Å)
- `price_usd_min/max` - –¶–µ–Ω–∞ –≤ USD (–º–∏–Ω/–º–∞–∫—Å)
- `currency` - –í–∞–ª—é—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é CNY)
- `moq_min/max` - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑ (–º–∏–Ω/–º–∞–∫—Å)
- `lead_time` - –í—Ä–µ–º—è –ø–æ—Å—Ç–∞–≤–∫–∏
- `source_url` - URL –∏—Å—Ç–æ—á–Ω–∏–∫–∞
- `main_image` - –ì–ª–∞–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- `vendor` - –ü–æ—Å—Ç–∞–≤—â–∏–∫
- `brand` - –ë—Ä–µ–Ω–¥
- `total_variants` - –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- `source_databases` - –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- `has_images` - –ï—Å—Ç—å –ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `has_specifications` - –ï—Å—Ç—å –ª–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏

### –¢–∞–±–ª–∏—Ü–∞ `images`
- `id` - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `product_id` - ID —Ç–æ–≤–∞—Ä–∞
- `image_url` - URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `local_path` - –õ–æ–∫–∞–ª—å–Ω—ã–π –ø—É—Ç—å
- `image_type` - –¢–∏–ø –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- `is_primary` - –ì–ª–∞–≤–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- `source_database` - –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `specifications`
- `id` - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `product_id` - ID —Ç–æ–≤–∞—Ä–∞
- `spec_type` - –¢–∏–ø —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- `spec_name` - –ù–∞–∑–≤–∞–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- `spec_value` - –ó–Ω–∞—á–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- `source_database` - –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `product_variants`
- `id` - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `product_id` - ID —Ç–æ–≤–∞—Ä–∞
- `variant_name` - –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞
- `price_cny/rub/usd` - –¶–µ–Ω—ã –≤ —Ä–∞–∑–Ω—ã—Ö –≤–∞–ª—é—Ç–∞—Ö
- `currency` - –í–∞–ª—é—Ç–∞
- `moq` - –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –∑–∞–∫–∞–∑
- `lead_time` - –í—Ä–µ–º—è –ø–æ—Å—Ç–∞–≤–∫–∏
- `transport_tariff` - –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–π —Ç–∞—Ä–∏—Ñ
- `quantity_in_box` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤ –∫–æ—Ä–æ–±–∫–µ
- `box_width/height/length` - –†–∞–∑–º–µ—Ä—ã –∫–æ—Ä–æ–±–∫–∏
- `box_weight` - –í–µ—Å –∫–æ—Ä–æ–±–∫–∏
- `item_weight` - –í–µ—Å –µ–¥–∏–Ω–∏—Ü—ã
- `cargo_density` - –ü–ª–æ—Ç–Ω–æ—Å—Ç—å –≥—Ä—É–∑–∞
- `cost_price` - –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å
- `markup_percent` - –ù–∞—Ü–µ–Ω–∫–∞ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### PostgreSQL
–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ PostgreSQL –∑–∞–ø—É—â–µ–Ω –∏ —Å–æ–∑–¥–∞–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `promo_calculator`.

–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=promo_calculator
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
```

### SQLite
–§–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö: `database/advanced_merged_products_clean.db`

## üìã –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –æ–ø–∏—Å–∞–Ω–∏—é
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫—É
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –Ω–∞–ª–∏—á–∏—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π/—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ 3 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ü–µ–Ω (–∏—Å–∫–ª—é—á–∞—è –æ–±—Ä–∞–∑—Ü—ã)

### –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–æ–≤–∞—Ä–∞
- –ü–æ–ª–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ
- –í—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ü–µ–Ω —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞
- –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏
- –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ –æ–±—ã—á–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏ –æ–±—Ä–∞–∑—Ü—ã

### API
- `GET /api/products` - –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤
- `GET /api/product/{id}` - –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–æ–≤–∞—Ä–µ
- `GET /api/statistics` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üé® –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI —Å Bootstrap
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ü–µ–Ω –≤ —Ä–∞–∑–Ω—ã—Ö –≤–∞–ª—é—Ç–∞—Ö
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ MOQ (—Ü–µ–ª—ã–µ —á–∏—Å–ª–∞)
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–≥–ª–∞–≤–Ω–æ–µ –ø–µ—Ä–≤—ã–º)
- –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–∑—Ü–æ–≤ –∏ –æ–±—ã—á–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
promo_calculator/
‚îú‚îÄ‚îÄ main.py                 # PostgreSQL –≤–µ—Ä—Å–∏—è
‚îú‚îÄ‚îÄ main_sqlite.py          # SQLite –≤–µ—Ä—Å–∏—è
‚îú‚îÄ‚îÄ requirements.txt        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ templates/              # HTML —à–∞–±–ª–æ–Ω—ã
‚îÇ   ‚îú‚îÄ‚îÄ final_index.html    # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îú‚îÄ‚îÄ final_product_detail.html # –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îÇ   ‚îî‚îÄ‚îÄ error.html          # –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ—à–∏–±–æ–∫
‚îú‚îÄ‚îÄ static/                 # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ database/               # SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ README.md              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–î–ª—è –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è PostgreSQL –±–∞–∑—ã –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ SQLite:
```bash
py recreate_postgresql_db.py
```

## üöÄ –ó–∞–ø—É—Å–∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

**–í–ê–ñ–ù–û**: –í—Å–µ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞—Ç—å –∏–∑ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞!

### –ê–ª–≥–æ—Ä–∏—Ç–º –∑–∞–ø—É—Å–∫–∞:
1. `cd projects/promo_calculator`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å: `pwd` –∏ `ls *.py`
3. –ó–∞–ø—É—Å–∫: `py –∏–º—è_—Å–∫—Ä–∏–ø—Ç–∞.py` (–ù–ï `python`!)

### PostgreSQL:
```bash
cd projects/promo_calculator
py main.py
# http://localhost:8003
```

### SQLite:
```bash
cd projects/promo_calculator
py main_sqlite.py
# http://localhost:8003
```

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

- **–¢–æ–≤–∞—Ä–æ–≤**: 17,973
- **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**: 71,043
- **–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫**: 635,359
- **–í–∞—Ä–∏–∞–Ω—Ç–æ–≤**: 45,176

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Backend**: FastAPI, Python 3.12
- **–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL, SQLite
- **Frontend**: HTML5, CSS3, JavaScript, Bootstrap
- **–®–∞–±–ª–æ–Ω—ã**: Jinja2
- **–í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫**: SentenceTransformers

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í Windows –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É `py` –≤–º–µ—Å—Ç–æ `python`
- MOQ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–∞–∫ —Ü–µ–ª—ã–µ —á–∏—Å–ª–∞ (–æ–∫—Ä—É–≥–ª–µ–Ω–∏–µ)
- –û–±—Ä–∞–∑—Ü—ã (MOQ=1) –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞
- –ì–ª–∞–≤–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–µ—Ä–≤—ã–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –≤ PostgreSQL