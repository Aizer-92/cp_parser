# –ü–∞–∫–µ—Ç –¥–µ–ø–ª–æ—è –ò–°–ü–†–ê–í–õ–ï–ù–ù–û–ì–û –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞

–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: 2025-09-07 10:34:47
–í–µ—Ä—Å–∏—è: 1.1 (–ò–°–ü–†–ê–í–õ–ï–ù–ê –ú–û–†–§–û–õ–û–ì–ò–Ø)

## üö® –í–ê–ñ–ù–û: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–≠—Ç–æ—Ç –ø–∞–∫–µ—Ç –∏—Å–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–±–ª–µ–º—É —Å –º–æ—Ä—Ñ–æ–ª–æ–≥–∏–µ–π –ø–æ–∏—Å–∫–∞:
- ‚úÖ "—Ç–∞–±–ª–µ—Ç–Ω–∏—Ü–∞" –∏ "—Ç–∞–±–ª–µ—Ç–Ω–∏—Ü—ã" —Ç–µ–ø–µ—Ä—å –Ω–∞—Ö–æ–¥—è—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è 'russian' –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PostgreSQL
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤—Å–µ –≤–µ—Å–æ–≤—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã

## –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–∫–µ—Ç–∞

- `fts_export_latest.sql` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ FTS
- `README.md` - –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ FTS

```bash
psql -h <host> -U <user> -d <database> -f fts_export_latest.sql
```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –º–æ—Ä—Ñ–æ–ª–æ–≥–∏—é:

```sql
-- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
SELECT COUNT(*) FROM products WHERE search_vector @@ plainto_tsquery('russian', '—Ç–∞–±–ª–µ—Ç–Ω–∏—Ü–∞');
SELECT COUNT(*) FROM products WHERE search_vector @@ plainto_tsquery('russian', '—Ç–∞–±–ª–µ—Ç–Ω–∏—Ü—ã');
```

### 3. –û—Ç–∫–∞—Ç (–µ—Å–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ)

```bash
# –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
psql -h <host> -U <user> -d <database> -c "
DROP TRIGGER IF EXISTS update_products_search_vector ON products;
DROP FUNCTION IF EXISTS update_search_vector();
DROP INDEX IF EXISTS idx_products_search_vector;
ALTER TABLE products DROP COLUMN IF EXISTS search_vector;
"
```

## –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

1. **–ú–æ—Ä—Ñ–æ–ª–æ–≥–∏—è**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 'russian' –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤–º–µ—Å—Ç–æ 'simple'
2. **–§—É–Ω–∫—Ü–∏—è**: update_search_vector() –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
3. **–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ**: –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –º–æ—Ä—Ñ–æ–ª–æ–≥–∏–µ–π
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã –º–æ—Ä—Ñ–æ–ª–æ–≥–∏–∏

## –í–µ—Å–æ–≤—ã–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

- **A (–≤—ã—Å–æ–∫–∏–π)**: title, original_title - –∑–∞–≥–æ–ª–æ–≤–∫–∏
- **B (—Å—Ä–µ–¥–Ω–∏–π)**: brand, vendor - –±—Ä–µ–Ω–¥—ã –∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∏
- **C (–Ω–∏–∑–∫–∏–π)**: description - –æ–ø–∏—Å–∞–Ω–∏—è

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

```sql
-- –ü–æ–∏—Å–∫ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –º–æ—Ä—Ñ–æ–ª–æ–≥–∏–µ–π
SELECT * FROM products 
WHERE search_vector @@ plainto_tsquery('russian', '–∑–∞–ø—Ä–æ—Å')
ORDER BY ts_rank_cd(search_vector, plainto_tsquery('russian', '–∑–∞–ø—Ä–æ—Å'), 32) DESC;
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- PostgreSQL 9.6+
- –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞ (–æ–±—ã—á–Ω–æ –≤–∫–ª—é—á–µ–Ω–æ)
- –ü—Ä–∞–≤–∞ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π, —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –∏ –∏–Ω–¥–µ–∫—Å–æ–≤

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ:

```sql
-- –¢–µ—Å—Ç 1: –ú–æ—Ä—Ñ–æ–ª–æ–≥–∏—è
SELECT '—Ç–∞–±–ª–µ—Ç–Ω–∏—Ü–∞' as word, COUNT(*) as count 
FROM products WHERE search_vector @@ plainto_tsquery('russian', '—Ç–∞–±–ª–µ—Ç–Ω–∏—Ü–∞')
UNION ALL
SELECT '—Ç–∞–±–ª–µ—Ç–Ω–∏—Ü—ã' as word, COUNT(*) as count 
FROM products WHERE search_vector @@ plainto_tsquery('russian', '—Ç–∞–±–ª–µ—Ç–Ω–∏—Ü—ã');

-- –¢–µ—Å—Ç 2: –†–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ
SELECT title, ts_rank_cd(search_vector, plainto_tsquery('russian', '—Ç–µ–ª–µ—Ñ–æ–Ω'), 32) as rank
FROM products 
WHERE search_vector @@ plainto_tsquery('russian', '—Ç–µ–ª–µ—Ñ–æ–Ω')
ORDER BY rank DESC
LIMIT 5;
```

–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º —Å–ª–æ–≤–∞!
