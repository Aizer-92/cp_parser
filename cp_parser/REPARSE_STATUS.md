# üìä –°—Ç–∞—Ç—É—Å –î–æ–ø–∞—Ä—Å–∏–Ω–≥–∞ 132 –ü—Ä–æ–µ–∫—Ç–æ–≤

**–î–∞—Ç–∞:** 10 –æ–∫—Ç—è–±—Ä—è 2025  
**–ó–∞–¥–∞—á–∞:** –î–æ–ø–∞—Ä—Å–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–ª—è 132 –ø—Ä–æ–µ–∫—Ç–æ–≤ Template 6 (—Ç–æ–≤–∞—Ä—ã —Å –æ—Ñ—Ñ–µ—Ä–∞–º–∏, –Ω–æ –±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)

---

## ‚úÖ –ü—Ä–æ–¥–µ–ª–∞–Ω–Ω–∞—è –†–∞–±–æ—Ç–∞

### 1. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ Excel –§–∞–π–ª–æ–≤
- ‚úÖ –°–∫–∞—á–∞–Ω–æ: **132 Excel —Ñ–∞–π–ª–∞**
- üìÅ –†–∞–∑–º–µ—Ä: ~2-3 –ì–ë
- üìÇ –ü–∞–ø–∫–∞: `excel_files/`

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –õ–æ–≥–∏–∫–∏ –ü–∞—Ä—Å–∏–Ω–≥–∞
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ—Ç–æ–¥ `reparse_images_only` –¥—É–±–ª–∏—Ä–æ–≤–∞–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –ø–∞—Ä—Å–∏–Ω–≥–µ

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ `parse_template_6.py` (—Å—Ç—Ä–æ–∫–∏ 698-711):
```python
# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É–∂–µ —Ç–∞–∫–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è —ç—Ç–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
exists = session.execute(text("""
    SELECT COUNT(*) 
    FROM product_images 
    WHERE product_id = :product_id 
    AND image_filename = :filename
"""), {
    'product_id': product_id,
    'filename': img['filename']
}).scalar()

if exists > 0:
    # –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É–∂–µ –µ—Å—Ç—å, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º
    continue
```

### 3. –ü–∞—Ä—Å–∏–Ω–≥ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- üîÑ **–í –ø—Ä–æ—Ü–µ—Å—Å–µ**: `reparse_images_from_excel.py`
- ‚úÖ **–õ–æ–≥–∏–∫–∞**: –ü–∞—Ä—Å–∏—Ç —Ç–æ–ª—å–∫–æ –ù–û–í–´–ï –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- üìä **–ü—Ä–æ–≥—Ä–µ—Å—Å**: ~5/132 –ø—Ä–æ–µ–∫—Ç–æ–≤

---

## üìà –¢–µ–∫—É—â–∞—è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –ë–î:
- **–í—Å–µ–≥–æ –∑–∞–ø–∏—Å–µ–π**: 47,379
- **–ù–∞ FTP (https)**: 10,715 (—Å—Ç–∞—Ä—ã–µ)
- **–ù—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å**: 1,040+ (–Ω–æ–≤—ã–µ)
- **–ë–µ–∑ URL**: 35,624 (–æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã)

### –õ–æ–∫–∞–ª—å–Ω—ã–µ –§–∞–π–ª—ã:
- **–§–∞–π–ª–æ–≤**: 15,940
- **–†–∞–∑–º–µ—Ä**: 8.5 –ì–ë
- **–ü–∞–ø–∫–∞**: `storage/images/`

### 132 –ü—Ä–æ–±–ª–µ–º–Ω—ã—Ö –ü—Ä–æ–µ–∫—Ç–∞:
- **–¢–æ–≤–∞—Ä–æ–≤**: 1,778
- **–° –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏**: 973 (54%)
- **–ë–ï–ó –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**: 805 (45%)
- **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π**: 2,673+

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ –®–∞–≥–∏

1. ‚è≥ **–î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞** (~20-30 –º–∏–Ω)
   ```bash
   tail -f reparse_images.log
   ```

2. üì§ **–ó–∞–≥—Ä—É–∑–∏—Ç—å –Ω–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ FTP**
   ```bash
   python3 upload_all_images_simple.py
   ```

3. ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É**
   ```bash
   python3 check_ftp_upload_needed.py
   ```

4. üìä **–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ**

---

## üìù –°–∫—Ä–∏–ø—Ç—ã

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ –°–∫—Ä–∏–ø—Ç—ã:
1. `download_132_excel.py` - —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ Excel —Ñ–∞–π–ª–æ–≤
2. `reparse_images_from_excel.py` - –ø–∞—Ä—Å–∏–Ω–≥ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
3. `check_ftp_upload_needed.py` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å
4. `monitor_download.py` - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
5. `monitor_reparse_images.py` - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–∞—Ä—Å–∏–Ω–≥–∞

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –§–∞–π–ª—ã:
- `parse_template_6.py` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è (—Å—Ç—Ä–æ–∫–∏ 698-711)

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ó–∞–º–µ—á–∞–Ω–∏—è

### –ü—Ä–æ–µ–∫—Ç—ã –ë–ï–ó –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ Excel
–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–µ–∫—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä 883, 1151) –Ω–µ –∏–º–µ—é—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –≤ Excel —Ñ–∞–π–ª–∞—Ö - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –Ω–µ –æ—à–∏–±–∫–∞.

### –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –ë–î –∏ –õ–æ–∫–∞–ª—å–Ω—ã–µ –§–∞–π–ª—ã
- **–í –ë–î**: 1,040 –∑–∞–ø–∏—Å–µ–π —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –ø—É—Ç—è–º–∏
- **–õ–æ–∫–∞–ª—å–Ω–æ**: 15,940 —Ñ–∞–π–ª–æ–≤
- **–ü—Ä–∏—á–∏–Ω–∞**: –§–∞–π–ª—ã –∏–∑ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ (–Ω–µ —Ç–æ–ª—å–∫–æ 132), –∫–æ—Ç–æ—Ä—ã–µ –µ—â–µ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –Ω–∞ FTP

### –î—É–±–ª–∏–∫–∞—Ç—ã
‚úÖ –î—É–±–ª–∏–∫–∞—Ç—ã –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–æ–π `product_id + image_filename`

---

## üìû –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –°–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–∞—Ä—Å–∏–Ω–≥–∞
tail -f reparse_images.log

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
python3 check_ftp_upload_needed.py

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
python3 monitor_reparse_images.py
```

---

**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** –í –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–∞—Ä—Å–∏–Ω–≥–∞ (5/132 –ø—Ä–æ–µ–∫—Ç–æ–≤)


