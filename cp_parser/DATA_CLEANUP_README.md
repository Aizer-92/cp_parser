# Data Cleanup - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö quantity

**–î–∞—Ç–∞:** 10.10.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

---

## üìä –ü—Ä–æ–±–ª–µ–º–∞

–í —Ç–∞–±–ª–∏—Ü–µ `price_offers` –±—ã–ª–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ 311 –∑–∞–ø–∏—Å–µ–π —Å –∞–Ω–æ–º–∞–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ `quantity`:
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ: 478 —Ç—Ä–∏–ª–ª–∏–æ–Ω–æ–≤ (478003130016500)
- –ü—Ä–∏—á–∏–Ω–∞: –û—à–∏–±–∫–∏ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ Google Sheets (—Å–∫–ª–µ–∏–≤–∞–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —á–∏—Å–µ–ª)

–≠—Ç–∏ –∞–Ω–æ–º–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ª–æ–º–∞–ª–∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ —Ç–∏—Ä–∞–∂—É:
```
psycopg2.errors.NumericValueOutOfRange: integer out of range
```

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### –≠—Ç–∞–ø 1: –≠–∫—Å–ø–æ—Ä—Ç –∞–Ω–æ–º–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
–°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç `export_anomalies.py` –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—à–µ–ª –≤—Å–µ 311 –∑–∞–ø–∏—Å–µ–π —Å `quantity > 10,000,000`.

### –≠—Ç–∞–ø 2: –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
–í—Å–µ 311 –∑–∞–ø–∏—Å–µ–π –≤—ã–≥—Ä—É–∂–µ–Ω—ã –≤ CSV —Å –ø–æ–ª—è–º–∏:
- Offer ID
- –ê–Ω–æ–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ quantity
- –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (–¥–ª—è —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏)
- Product ID + –Ω–∞–∑–≤–∞–Ω–∏–µ
- Project ID + –Ω–∞–∑–≤–∞–Ω–∏–µ
- Google Sheets URL (–¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞)

### –≠—Ç–∞–ø 3: –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
–°–∫—Ä–∏–ø—Ç `apply_fixes.py` –ø—Ä–∏–º–µ–Ω–∏–ª –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

---

## üìÇ –§–∞–π–ª—ã

### –ê–∫—Ç—É–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `ALL_311_ANOMALIES_EMPTY.csv` - –§–∏–Ω–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π (—Å–æ—Ö—Ä–∞–Ω–µ–Ω –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏)
- ‚úÖ `apply_fixes.py` - –°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –∏–∑ CSV
- ‚úÖ `UI_IMPROVEMENTS_REPORT.md` - –û—Ç—á–µ—Ç –æ–± —É–ª—É—á—à–µ–Ω–∏—è—Ö UI
- ‚úÖ `DATA_CLEANUP_README.md` - –≠—Ç–æ—Ç —Ñ–∞–π–ª

### –£–¥–∞–ª–µ–Ω–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- ‚ùå `export_anomalies.py` - –°–∫—Ä–∏–ø—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞ (–±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–µ–Ω)
- ‚ùå `auto_fill_*.py` - –°–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è (–±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω—ã)
- ‚ùå `anomalies_report_*.csv` - –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ CSV (–±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω—ã)

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
–í—Å–µ–≥–æ price_offers: 29,851
–ê–Ω–æ–º–∞–ª—å–Ω—ã—Ö quantity: 311 ‚ùå
```

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
```
–í—Å–µ–≥–æ price_offers: 29,851
–ê–Ω–æ–º–∞–ª—å–Ω—ã—Ö quantity: 10 ‚úÖ (–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å—Ç–∞–∫–∞–Ω—á–∏–∫–æ–≤)
```

**–û—Å—Ç–∞–≤—à–∏–µ—Å—è 10 –∑–∞–ø–∏—Å–µ–π:**
- 2 –∑–∞–ø–∏—Å–∏: 182,000,000 —à—Ç (–°—Ç–∞–∫–∞–Ω 200 –ú–õ)
- 4 –∑–∞–ø–∏—Å–∏: 52,670,000 —à—Ç (–°—Ç–∞–∫–∞–Ω 300 –ú–õ)
- 4 –∑–∞–ø–∏—Å–∏: 16,500,000 —à—Ç (–°—Ç–∞–∫–∞–Ω 400 –ú–õ)

–≠—Ç–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –±—É–º–∞–∂–Ω—ã—Ö —Å—Ç–∞–∫–∞–Ω—á–∏–∫–æ–≤.

---

## üîß –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å apply_fixes.py

–ï—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –∞–Ω–æ–º–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:

1. –°–æ–∑–¥–∞–π—Ç–µ CSV —Ñ–∞–π–ª —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏:
```
Offer ID;–°—Ç–æ–ª–±–µ—Ü;–ê–Ω–æ–º–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ;–ü—Ä–µ–¥–ª–∞–≥–∞–µ–º–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ;...
```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç:
```bash
python3 apply_fixes.py your_file.csv
```

3. –°–∫—Ä–∏–ø—Ç –ø–æ–∫–∞–∂–µ—Ç –ø—Ä–µ–≤—å—é –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –ø–æ–ø—Ä–æ—Å–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ: `yes`

---

## üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### –¢–æ–ø-10 –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º–∏:

| –ü—Ä–æ–µ–∫—Ç | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π |
|--------|-------------|
| –õ–∞–¥–∞ –ö—É–∑—å–º–∏–Ω—Å–∫–∞—è / –£–ø–∞–∫–æ–≤–∫–∞ | 32 |
| –û–û–û "–ë–†–ï–ù–î–ò–§–ò" / –ó–Ω–∞—á–∫–∏ | 24 |
| –û–û–û "–ö–ì–ò" / –ü–∞–ª–∏—Ç—Ä–∞ | 18 |
| –¢-–±–∞–Ω–∫ / –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω—ã–µ —Å—Ç–º | 18 |
| –û–ª—å–≥–∞ –°—Ç–∞—Ä–æ–¥—É–±—Ü–µ–≤–∞ / –°–±–µ—Ä | 16 |
| –ü–æ–ª–∏–Ω–∞ –¢–∞—Ä–Ω–æ–ø–æ–ª—å / –ë—å—é—Ç–∏ | 16 |
| –†–æ—Å—Ç–µ–ª–µ–∫–æ–º B2B / –°—É–≤–µ–Ω–∏—Ä–∫–∞ | 16 |
| –ó–∞—Ä–æ—Å (–¥–µ—Ç—Å–∫–∏–µ —Ç–æ–≤–∞—Ä—ã) | 12 |
| –±—É–º–∞–∂–Ω—ã–µ —Å—Ç–∞–∫–∞–Ω—á–∏–∫–∏ | 10 |
| –º–∞—Ä–∫–∏ | 8 |

### –¢–∏–ø–∏—á–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
- `478003130016500` ‚Üí `47800` (—Å–∫–ª–µ–µ–Ω–Ω—ã–µ —á–∏—Å–ª–∞)
- `90010002450500` ‚Üí `900` (—Å–∫–ª–µ–µ–Ω–Ω—ã–µ —á–∏—Å–ª–∞)
- `20250728000000` ‚Üí `500` (–¥–∞—Ç–∞ –≤–º–µ—Å—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞)
- `10001500` ‚Üí `1000` (—Å–∫–ª–µ–µ–Ω–Ω—ã–µ —á–∏—Å–ª–∞)

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. –û—Ç–∫—Ä–æ–π—Ç–µ `/products` –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
2. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä "–¢–∏—Ä–∞–∂ –¥–æ: 1000"
4. –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–ª–∂–µ–Ω –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
5. –¢–æ–≤–∞—Ä—ã —Å —Ç–∏—Ä–∞–∂–æ–º > 1000 –Ω–µ –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ PostgreSQL
- ‚úÖ –°–∫—Ä–∏–ø—Ç —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º
- ‚úÖ –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ CSV –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ–≥–æ –æ—Ç–∫–∞—Ç–∞
- ‚úÖ –õ–æ–≥ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å

---

## üí° –£—Ä–æ–∫–∏

1. **–í—Å–µ–≥–¥–∞ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –ø–∞—Ä—Å–∏–Ω–≥–µ** - –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤
2. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö** - `quantity` –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `INTEGER/BIGINT`
3. **–õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–æ–º–∞–ª–∏–∏** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—è–≤–ª—è—Ç—å –∏ —Å–æ–æ–±—â–∞—Ç—å –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö
4. **–°–æ—Ö—Ä–∞–Ω—è—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–∏** - Google Sheets URLs –ø–æ–º–æ–≥–ª–∏ –≤ —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–µ

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏–ª–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∞–Ω–æ–º–∞–ª–∏–π:
1. –°–æ–∑–¥–∞–π—Ç–µ —ç–∫—Å–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ SQL –∑–∞–ø—Ä–æ—Å
2. –í—Ä—É—á–Ω—É—é –ø—Ä–æ–≤–µ—Ä—å—Ç–µ Google Sheets –∏—Å—Ç–æ—á–Ω–∏–∫–∏
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `apply_fixes.py` –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π








