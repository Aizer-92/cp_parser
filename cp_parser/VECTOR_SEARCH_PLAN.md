# –ü–ª–∞–Ω –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞

## üéØ –¶–µ–ª—å
–£–ª—É—á—à–∏—Ç—å –ø–æ–∏—Å–∫ –ø–æ —Ç–æ–≤–∞—Ä–∞–º —Å —É—á–µ—Ç–æ–º —Å–∏–Ω–æ–Ω–∏–º–æ–≤ –∏ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å—Ö–æ–¥—Å—Ç–≤–∞.

**–ü—Ä–æ–±–ª–µ–º–∞ —Å–µ–π—á–∞—Å:**
- –ü–æ–∏—Å–∫ –ø–æ `ILIKE` - —Ç–æ–ª—å–∫–æ —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ–¥—Å—Ç—Ä–æ–∫–∏
- "—Ä—é–∫–∑–∞–∫" –Ω–µ –Ω–∞–π–¥–µ—Ç "backpack"
- "—Ä—É—á–∫–∞" –Ω–µ –Ω–∞–π–¥–µ—Ç "pen" 
- "–±–ª–æ–∫–Ω–æ—Ç" –Ω–µ –Ω–∞–π–¥–µ—Ç "—Ç–µ—Ç—Ä–∞–¥—å" –∏–ª–∏ "–∑–∞–ø–∏—Å–Ω–∞—è –∫–Ω–∏–∂–∫–∞"
- –ù—É–∂–Ω–æ –ø–µ—Ä–µ–±–∏—Ä–∞—Ç—å –≤—Ä—É—á–Ω—É—é —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –Ω–∞–∑–≤–∞–Ω–∏–π

**–ß—Ç–æ –¥–∞—Å—Ç –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫:**
- –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ (–ø–æ–Ω–∏–º–∞–µ—Ç —Å–º—ã—Å–ª)
- –ù–∞—Ö–æ–¥–∏—Ç —Å–∏–Ω–æ–Ω–∏–º—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- –†–∞–±–æ—Ç–∞–µ—Ç —Å —Ä–∞–∑–Ω—ã–º–∏ —è–∑—ã–∫–∞–º–∏ (–†–£/EN)
- –£—á–∏—Ç—ã–≤–∞–µ—Ç –æ–ø–µ—á–∞—Ç–∫–∏ –∏ –≤–∞—Ä–∏–∞—Ü–∏–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏—è

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: PostgreSQL + pgvector (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ë–î (—É–∂–µ –µ—Å—Ç—å PostgreSQL –Ω–∞ Railway)
- ‚úÖ –ù–µ –Ω—É–∂–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
- ‚úÖ –ü—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–µ–∫—É—â–∏–º –∫–æ–¥–æ–º
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ (Railway —É–∂–µ –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç—Å—è)
- ‚úÖ –ù–∏–∑–∫–∞—è –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å (–¥–∞–Ω–Ω—ã–µ –≤ —Ç–æ–π –∂–µ –ë–î)

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è –ù—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ pgvector –Ω–∞ Railway
- ‚ö†Ô∏è –ù—É–∂–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å embeddings –¥–ª—è –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- PostgreSQL —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ: `pgvector`
- Embeddings –º–æ–¥–µ–ª—å: OpenAI `text-embedding-3-small` –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–∞—è `sentence-transformers`
- –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è: HNSW (Hierarchical Navigable Small World)

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: Elasticsearch —Å kNN search

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ú–æ—â–Ω–∞—è full-text search –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å
- ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —Ñ–∏—á (—Ñ–∞—Å–µ—Ç—ã, –∞–≥–≥—Ä–µ–≥–∞—Ü–∏–∏)

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å ($$$)
- ‚ùå –°–ª–æ–∂–Ω–µ–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (ES + PostgreSQL)
- ‚ùå –ò–∑–±—ã—Ç–æ—á–Ω–æ –¥–ª—è —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: Pinecone / Weaviate (–≤–µ–∫—Ç–æ—Ä–Ω—ã–µ –ë–î)

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
- ‚úÖ –í—ã—Å–æ–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ùå –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ ($$$)
- ‚ùå Vendor lock-in
- ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

---

## üìã –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–í–∞—Ä–∏–∞–Ω—Ç 1)

### –§–∞–∑–∞ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ (1-2 –¥–Ω—è)

#### 1.1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ pgvector –Ω–∞ Railway
```sql
CREATE EXTENSION IF NOT EXISTS vector;
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```sql
SELECT * FROM pg_available_extensions WHERE name = 'vector';
```

#### 1.2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–∫–∏ –¥–ª—è embeddings
```sql
ALTER TABLE products 
ADD COLUMN name_embedding vector(1536);  -- –†–∞–∑–º–µ—Ä –¥–ª—è OpenAI text-embedding-3-small

CREATE INDEX ON products 
USING hnsw (name_embedding vector_cosine_ops);
```

#### 1.3. –í—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –¥–ª—è embeddings

**–í–∞—Ä–∏–∞–Ω—Ç A: OpenAI API (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è —Å—Ç–∞—Ä—Ç–∞)**
- –ú–æ–¥–µ–ª—å: `text-embedding-3-small` (1536 —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å)
- –°—Ç–æ–∏–º–æ—Å—Ç—å: ~$0.02 –∑–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤
- –î–ª—è 3,000 —Ç–æ–≤–∞—Ä–æ–≤ √ó 50 —Ç–æ–∫–µ–Ω–æ–≤ = ~$0.003
- –ö–∞—á–µ—Å—Ç–≤–æ: –æ—Ç–ª–∏—á–Ω–æ–µ, multilingual (RU+EN)

**–í–∞—Ä–∏–∞–Ω—Ç B: –õ–æ–∫–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å (–¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏)**
- –ú–æ–¥–µ–ª—å: `sentence-transformers/paraphrase-multilingual-mpnet-base-v2`
- –°—Ç–æ–∏–º–æ—Å—Ç—å: $0 (–Ω–æ –Ω—É–∂–Ω–æ CPU/GPU)
- –†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å: 768
- –ö–∞—á–µ—Å—Ç–≤–æ: —Ö–æ—Ä–æ—à–µ–µ –¥–ª—è RU+EN

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ù–∞—á–∞—Ç—å —Å OpenAI (–ø—Ä–æ—â–µ, –Ω–∞–¥–µ–∂–Ω–µ–µ), –ø–æ—Ç–æ–º –º–æ–∂–Ω–æ –ø–µ—Ä–µ–π—Ç–∏ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é.

---

### –§–∞–∑–∞ 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è embeddings (1 –¥–µ–Ω—å)

#### 2.1. –°–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ embeddings
```python
# generate_embeddings.py

from openai import OpenAI
from database.postgresql_manager import db_manager
from sqlalchemy import text
import time

client = OpenAI(api_key="...")

def generate_embedding(text: str):
    """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç embedding –¥–ª—è —Ç–µ–∫—Å—Ç–∞"""
    response = client.embeddings.create(
        input=text,
        model="text-embedding-3-small"
    )
    return response.data[0].embedding

def update_product_embeddings():
    with db_manager.get_session() as session:
        # –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –±–µ–∑ embeddings
        products = session.execute(text("""
            SELECT id, name, description
            FROM products
            WHERE name_embedding IS NULL
            ORDER BY id
        """)).fetchall()
        
        print(f"–ù–∞–π–¥–µ–Ω–æ {len(products)} —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏")
        
        for i, (product_id, name, description) in enumerate(products, 1):
            # –§–æ—Ä–º–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç –¥–ª—è embedding
            text_for_embedding = name
            if description:
                text_for_embedding += f" {description[:200]}"  # –ü–µ—Ä–≤—ã–µ 200 —Å–∏–º–≤–æ–ª–æ–≤
            
            # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º embedding
            embedding = generate_embedding(text_for_embedding)
            
            # –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ë–î
            session.execute(text("""
                UPDATE products 
                SET name_embedding = :embedding::vector
                WHERE id = :product_id
            """), {
                'embedding': str(embedding),
                'product_id': product_id
            })
            
            if i % 10 == 0:
                session.commit()
                print(f"‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ {i}/{len(products)}")
                time.sleep(0.1)  # Rate limiting
        
        session.commit()
        print(f"‚úÖ –í—Å–µ embeddings —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã!")

if __name__ == '__main__':
    update_product_embeddings()
```

#### 2.2. –¢–µ—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å
```sql
-- –ù–∞–π—Ç–∏ —Ç–æ–≤–∞—Ä—ã –ø–æ—Ö–æ–∂–∏–µ –Ω–∞ "—Ä—é–∫–∑–∞–∫"
WITH query_embedding AS (
    SELECT '[...]'::vector as embedding  -- embedding –¥–ª—è "—Ä—é–∫–∑–∞–∫"
)
SELECT 
    p.id,
    p.name,
    1 - (p.name_embedding <=> q.embedding) as similarity
FROM products p, query_embedding q
WHERE p.name_embedding IS NOT NULL
ORDER BY p.name_embedding <=> q.embedding
LIMIT 10;
```

---

### –§–∞–∑–∞ 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (1-2 –¥–Ω—è)

#### 3.1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ backend

**–ì–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è):**
1. –°–Ω–∞—á–∞–ª–∞ –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ (top-50 –ø–æ —Å–µ–º–∞–Ω—Ç–∏–∫–µ)
2. –ü–æ—Ç–æ–º —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ü–µ–Ω–µ/—Ç–∏—Ä–∞–∂—É/—Ä–µ–≥–∏–æ–Ω—É
3. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏

```python
# app.py

def products_list():
    search = request.args.get('search', '', type=str)
    
    if search.strip():
        # –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º embedding –¥–ª—è –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
        search_embedding = generate_embedding(search.strip())
        
        # –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫ + —Ñ–∏–ª—å—Ç—Ä—ã
        products_sql = text(f"""
            WITH ranked_products AS (
                SELECT 
                    p.id,
                    p.name,
                    p.description,
                    pr.region,
                    1 - (p.name_embedding <=> :search_embedding::vector) as similarity
                FROM products p
                LEFT JOIN projects pr ON p.project_id = pr.id
                WHERE p.name_embedding IS NOT NULL
                    AND {where_clause}
                ORDER BY p.name_embedding <=> :search_embedding::vector
                LIMIT 100
            )
            SELECT * FROM ranked_products
            WHERE similarity > 0.5  -- –ü–æ—Ä–æ–≥ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏
            ORDER BY similarity DESC
            LIMIT :limit OFFSET :offset
        """)
    else:
        # –û–±—ã—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å –±–µ–∑ –ø–æ–∏—Å–∫–∞
        ...
```

#### 3.2. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ embeddings –∑–∞–ø—Ä–æ—Å–æ–≤
```python
# –ö—ç—à –¥–ª—è —á–∞—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
import redis
cache = redis.Redis(...)

def get_cached_embedding(query: str):
    cached = cache.get(f"emb:{query}")
    if cached:
        return json.loads(cached)
    
    embedding = generate_embedding(query)
    cache.setex(f"emb:{query}", 3600, json.dumps(embedding))
    return embedding
```

#### 3.3. UI —É–ª—É—á—à–µ–Ω–∏—è
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å "—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å" (similarity score)
- "–ü–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã" –≤ –∫–∞—Ä—Ç–æ—á–∫–µ —Ç–æ–≤–∞—Ä–∞
- –ê–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç —Å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏

---

### –§–∞–∑–∞ 4: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (1 –¥–µ–Ω—å)

#### 4.1. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
```python
import time

start = time.time()
# –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫
end = time.time()
print(f"–ü–æ–∏—Å–∫ –∑–∞–Ω—è–ª: {end - start:.3f}s")
```

#### 4.2. –ò–Ω–¥–µ–∫—Å—ã
```sql
-- HNSW –∏–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
CREATE INDEX products_name_embedding_idx 
ON products 
USING hnsw (name_embedding vector_cosine_ops)
WITH (m = 16, ef_construction = 64);

-- –û–±—ã—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
CREATE INDEX products_project_region_idx ON products(project_id) 
WHERE region = '–û–ê–≠';
```

#### 4.3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ embeddings
```python
# –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
def create_product(name, description, ...):
    # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–≤–∞—Ä
    product = Product(name=name, ...)
    session.add(product)
    session.flush()
    
    # –°—Ä–∞–∑—É –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º embedding
    embedding = generate_embedding(f"{name} {description}")
    product.name_embedding = embedding
    
    session.commit()
```

---

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

### OpenAI API
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è embeddings –¥–ª—è 3,000 —Ç–æ–≤–∞—Ä–æ–≤: **~$0.01** (–æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ)
- –ü–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã: **~$0.001 –∑–∞ 1,000 –∑–∞–ø—Ä–æ—Å–æ–≤**
- –ú–µ—Å—è—á–Ω–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å (10,000 –∑–∞–ø—Ä–æ—Å–æ–≤): **~$0.01**

### Railway (pgvector)
- $0 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ (–≤—Ö–æ–¥–∏—Ç –≤ —Ç–µ–∫—É—â–∏–π –ø–ª–∞–Ω)

**–ò—Ç–æ–≥–æ: ~$0.02/–º–µ—Å—è—Ü** üéâ

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –£–ª—É—á—à–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞:
- ‚úÖ –ù–∞—Ö–æ–¥–∏—Ç —Å–∏–Ω–æ–Ω–∏–º—ã ("—Ä—é–∫–∑–∞–∫" ‚Üí "backpack", "—Å—É–º–∫–∞ –Ω–∞ —Å–ø–∏–Ω—É")
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —Å –æ–ø–µ—á–∞—Ç–∫–∞–º–∏ ("—Ä—É—á—å–∞" ‚Üí "—Ä—É—á–∫–∞")
- ‚úÖ –ü–æ–Ω–∏–º–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç ("–¥–µ–ª–æ–≤–æ–π –ø–æ–¥–∞—Ä–æ–∫" ‚Üí –±–ª–æ–∫–Ω–æ—Ç—ã, —Ä—É—á–∫–∏)
- ‚úÖ Multilingual (EN ‚Üî RU –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- –í–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫: **~50-100ms**
- ILIKE –ø–æ–∏—Å–∫ —Å–µ–π—á–∞—Å: **~20-30ms**
- –ö–æ–º–ø—Ä–æ–º–∏—Å—Å –ø—Ä–∏–µ–º–ª–µ–º—ã–π –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞

---

## üöÄ –ü–∏–ª–æ—Ç–Ω—ã–π –∑–∞–ø—É—Å–∫ (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π MVP)

### –ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è —Ç–µ—Å—Ç–∞:

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å pgvector –Ω–∞ Railway** (5 –º–∏–Ω—É—Ç)
   ```sql
   CREATE EXTENSION vector;
   ```

2. **–î–æ–±–∞–≤–∏—Ç—å –∫–æ–ª–æ–Ω–∫—É** (1 –º–∏–Ω—É—Ç–∞)
   ```sql
   ALTER TABLE products ADD COLUMN name_embedding vector(1536);
   ```

3. **–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å embeddings –¥–ª—è 100 —Ç–æ–≤–∞—Ä–æ–≤** (5 –º–∏–Ω—É—Ç)
   - –í–∑—è—Ç—å —Ç–æ–ø-100 –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
   - –ü—Ä–æ–≥–Ω–∞—Ç—å —á–µ—Ä–µ–∑ OpenAI API

4. **–¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫** (10 –º–∏–Ω—É—Ç)
   - –ù–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π endpoint `/search_vector`
   - –°—Ä–∞–≤–Ω–∏—Ç—å —Å –æ–±—ã—á–Ω—ã–º –ø–æ–∏—Å–∫–æ–º

**–í—Ä–µ–º—è –Ω–∞ MVP: 30 –º–∏–Ω—É—Ç**
**–°—Ç–æ–∏–º–æ—Å—Ç—å: $0.001**

---

## ‚ùì –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è

1. **–ë—é–¥–∂–µ—Ç:** –ì–æ—Ç–æ–≤—ã —Ç—Ä–∞—Ç–∏—Ç—å ~$0.02/–º–µ—Å—è—Ü –Ω–∞ OpenAI –∏–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ª–æ–∫–∞–ª—å–Ω—É—é –º–æ–¥–µ–ª—å?
2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ü—Ä–∏–µ–º–ª–µ–º–æ –ª–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–∏—Å–∫–∞ –¥–æ 100ms?
3. **–û–±—ä–µ–º:** –°–∫–æ–ª—å–∫–æ –Ω–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –º–µ—Å—è—Ü? (–¥–ª—è –∞–≤—Ç–æ-–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ embeddings)
4. **–Ø–∑—ã–∫–∏:** –¢–æ–ª—å–∫–æ RU+EN –∏–ª–∏ –Ω—É–∂–Ω—ã –¥—Ä—É–≥–∏–µ?
5. **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–Ω–æ —Å–µ–π—á–∞—Å –∏–ª–∏ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø–æ–∑–∂–µ?

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

**–ü—Ä–µ–¥–ª–∞–≥–∞—é –Ω–∞—á–∞—Ç—å —Å MVP:**
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å pgvector (5 –º–∏–Ω)
2. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å embeddings –¥–ª—è 100 —Ç–æ–≤–∞—Ä–æ–≤ (5 –º–∏–Ω)
3. –°–¥–µ–ª–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π endpoint (20 –º–∏–Ω)
4. –û—Ü–µ–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

**–ï—Å–ª–∏ –ø–æ–Ω—Ä–∞–≤–∏—Ç—Å—è ‚Üí –≤–Ω–µ–¥—Ä—è–µ–º –¥–ª—è –≤—Å–µ—Ö —Ç–æ–≤–∞—Ä–æ–≤**
**–ï—Å–ª–∏ –Ω–µ—Ç ‚Üí –æ—Ç–∫–∞—Ç—ã–≤–∞–µ–º (–Ω–∏—á–µ–≥–æ –Ω–µ —Å–ª–æ–º–∞–µ—Ç—Å—è)**

**–†–∏—Å–∫–∏: –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ**
**–í—ã–≥–æ–¥–∞: –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–≥—Ä–æ–º–Ω–∞—è** (–Ω–∞–º–Ω–æ–≥–æ —É–¥–æ–±–Ω–µ–µ –∏—Å–∫–∞—Ç—å!)

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [pgvector –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://github.com/pgvector/pgvector)
- [OpenAI Embeddings](https://platform.openai.com/docs/guides/embeddings)
- [sentence-transformers](https://www.sbert.net/)
- [HNSW –∏–Ω–¥–µ–∫—Å—ã](https://github.com/nmslib/hnswlib)

---

**–°–æ–∑–¥–∞–Ω–æ:** 10.10.2025
**–°—Ç–∞—Ç—É—Å:** –ü–ª–∞–Ω –≥–æ—Ç–æ–≤ –∫ –æ–±—Å—É–∂–¥–µ–Ω–∏—é
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –†–µ—à–µ–Ω–∏–µ –ø–æ MVP


