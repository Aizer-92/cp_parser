# üîß –†–µ—à–µ–Ω–∏–µ –ü—Ä–æ–±–ª–µ–º—ã: –ü—Ä–æ–µ–∫—Ç 815

**–î–∞—Ç–∞:** 11 –æ–∫—Ç—è–±—Ä—è 2025  
**–ü—Ä–æ–µ–∫—Ç:** [–ü—Ä–æ—Å—á–µ—Ç-–†–§] –§–µ–¥–µ—Ä–∞—Ü–∏—è –ü–∞–¥–µ–ª–∞ –†–æ—Å—Å–∏—è  
**ID:** 815  
**URL:** https://headcp.up.railway.app/project/815

---

## üéØ –î–∏–∞–≥–Ω–æ–∑

### –ü—Ä–æ–±–ª–µ–º–∞:
**–¢–∏—Ä–∞–∂–∏ –≤ –ë–î –≤ 10 —Ä–∞–∑ –±–æ–ª—å—à–µ, —á–µ–º –≤ Excel —Ñ–∞–π–ª–µ**

### –ü—Ä–∏—á–∏–Ω–∞:
–ü—Ä–æ–µ–∫—Ç 815 –±—ã–ª —Å–ø–∞—Ä—Å–µ–Ω **—Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–µ–π –ø–∞—Ä—Å–µ—Ä–∞ Template 4** –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `_parse_quantity`.

### –°—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è (—Å –±–∞–≥–æ–º):
```python
def _parse_quantity(self, value):
    val_str = str(value).replace(' ', '').replace(',', '')
    # –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–æ–ª—å–∫–æ —Ü–∏—Ñ—Ä—ã (–≤–∫–ª—é—á–∞—è –ø–æ—Å–ª–µ —Ç–æ—á–∫–∏!)
    digits = ''.join(filter(str.isdigit, val_str))
    return int(digits) if digits else None
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- `"300.0"` ‚Üí `"3000"` ‚Üí `3000` ‚ùå (—É–º–Ω–æ–∂–µ–Ω–æ –Ω–∞ 10!)
- `"500.0"` ‚Üí `"5000"` ‚Üí `5000` ‚ùå
- `"1000.0"` ‚Üí `"10000"` ‚Üí `10000` ‚ùå

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è (—Ç–µ–∫—É—â–∞—è):
```python
def _parse_quantity(self, value):
    val_str = str(value).strip().replace(' ', '')
    if '-' in val_str:
        val_str = val_str.split('-')[0].strip()
    try:
        return int(float(val_str))  # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ
    except (ValueError, TypeError):
        return None
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- `"300.0"` ‚Üí `300.0` ‚Üí `300` ‚úÖ
- `"500.0"` ‚Üí `500.0` ‚Üí `500` ‚úÖ
- `"1000.0"` ‚Üí `1000.0` ‚Üí `1000` ‚úÖ

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –î–∞–Ω–Ω—ã—Ö

| –¢–æ–≤–∞—Ä | –°—Ç—Ä–æ–∫–∞ | Excel | –ë–î | –ö—Ä–∞—Ç–Ω–æ—Å—Ç—å |
|-------|--------|-------|-----|-----------|
| –ú–∞—Å—Å–∞–∂–µ—Ä | 4 | 300 | 3,000 | x10 |
| –§—É—Ç–±–æ–ª–∫–∞ | 6 | 500 | 5,000 | x10 |
| –°—É–º–∫–∞ | 8 | 300 | 3,000 | x10 |
| –ü–æ–ª–æ—Ç–µ–Ω—Ü–µ | 9 | 300 | 3,000 | x10 |
| –ë—É—Ç—ã–ª–∫–∞ | 10 | 1,000 | 10,000 | x10 |

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –£–¥–∞–ª–∏—Ç—å –î–∞–Ω–Ω—ã–µ –ü—Ä–æ–µ–∫—Ç–∞ 815
```sql
-- –£–¥–∞–ª–∏—Ç—å –æ—Ñ—Ñ–µ—Ä—ã
DELETE FROM price_offers 
WHERE product_id IN (SELECT id FROM products WHERE project_id = 815);

-- –£–¥–∞–ª–∏—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
DELETE FROM product_images 
WHERE product_id IN (SELECT id FROM products WHERE project_id = 815);

-- –£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä—ã
DELETE FROM products WHERE project_id = 815;

-- –°–±—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞
UPDATE projects 
SET status = 'pending', parsing_completed_at = NULL 
WHERE id = 815;
```

### 2. –ü–µ—Ä–µ–ø–∞—Ä—Å–∏—Ç—å –ü—Ä–æ–µ–∫—Ç 815
```bash
cd /Users/bakirovresad/Downloads/Reshad\ 1/projects/cp_parser
python3 << 'EOF'
from parse_template_4 import Template4Parser
from pathlib import Path

excel_file = Path("excel_files/project_815_1Cmr8N-bNGaGHYkhqHCW-XT5S1uoEaqjSuRcu68WSCBo.xlsx")
parser = Template4Parser()
result = parser.parse_file(str(excel_file), 815)

print(f"‚úÖ –ü–µ—Ä–µ–ø–∞—Ä—Å–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ!")
EOF
```

### 3. –ó–∞–≥—Ä—É–∑–∏—Ç—å –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ FTP (–µ—Å–ª–∏ –µ—Å—Ç—å –Ω–æ–≤—ã–µ)

### 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –†–µ–∑—É–ª—å—Ç–∞—Ç
```sql
SELECT 
    p.id,
    p.name,
    po.quantity,
    po.price_usd,
    po.route
FROM products p
LEFT JOIN price_offers po ON p.id = po.product_id
WHERE p.project_id = 815
AND p.row_number IN (4, 6, 8, 9, 10)
ORDER BY p.row_number, po.quantity;
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ú–∞—Å—Å–∞–∂–µ—Ä: 300 (–Ω–µ 3,000)
- –§—É—Ç–±–æ–ª–∫–∞: 500 (–Ω–µ 5,000)
- –°—É–º–∫–∞: 300 (–Ω–µ 3,000)
- –ü–æ–ª–æ—Ç–µ–Ω—Ü–µ: 300 (–Ω–µ 3,000)
- –ë—É—Ç—ã–ª–∫–∞: 1,000 (–Ω–µ 10,000)

---

## üîç –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ü—Ä–æ–≤–µ—Ä–∫–∞

### –ù–∞–π—Ç–∏ –î—Ä—É–≥–∏–µ –ü—Ä–æ–µ–∫—Ç—ã —Å –¢–æ–π –ñ–µ –ü—Ä–æ–±–ª–µ–º–æ–π

**–ü—Ä–∏–∑–Ω–∞–∫–∏:**
1. –®–∞–±–ª–æ–Ω: Template 4
2. –¢–∏—Ä–∞–∂–∏ –∫—Ä–∞—Ç–Ω—ã 10 (300 ‚Üí 3000, 500 ‚Üí 5000)
3. –î–∞—Ç–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞: –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–≥–∞ (–¥–æ 9 –æ–∫—Ç—è–±—Ä—è 2025)

**SQL –¥–ª—è –ø–æ–∏—Å–∫–∞:**
```sql
SELECT 
    p.project_id,
    pr.project_name,
    p.row_number,
    po.quantity
FROM products p
INNER JOIN price_offers po ON p.id = po.product_id
INNER JOIN projects pr ON p.project_id = pr.id
WHERE po.quantity % 10 = 0  -- –ö—Ä–∞—Ç–Ω–æ 10
AND po.quantity >= 1000     -- –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ –±–æ–ª—å—à–∏–µ
ORDER BY po.quantity DESC
LIMIT 100;
```

---

## ‚è±Ô∏è –û—Ü–µ–Ω–∫–∞ –í—Ä–µ–º–µ–Ω–∏

- –£–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö: 10 —Å–µ–∫
- –ü–µ—Ä–µ–ø–∞—Ä—Å–∏–Ω–≥: 10-20 —Å–µ–∫
- –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: 0 —Å–µ–∫ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —É–∂–µ –Ω–∞ FTP)
- –ü—Ä–æ–≤–µ—Ä–∫–∞: 5 —Å–µ–∫

**–ò–¢–û–ì–û: ~30-40 —Å–µ–∫—É–Ω–¥**

---

## üìù Changelog

- **11.10.2025:** –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ —Å —Ç–∏—Ä–∞–∂–∞–º–∏ x10
- **11.10.2025:** –ò–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞ - —Å—Ç–∞—Ä–∞—è –≤–µ—Ä—Å–∏—è –ø–∞—Ä—Å–µ—Ä–∞
- **11.10.2025:** Excel —Ñ–∞–π–ª —Å–∫–∞—á–∞–Ω –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- **11.10.2025:** –°–æ—Å—Ç–∞–≤–ª–µ–Ω –ø–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

---

*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω 11.10.2025 ~11:30 AM*





