# üîÑ Workflow –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä —Ç–∞–±–ª–∏—Ü

**–î–∞—Ç–∞**: 08.10.2025  
**–¶–µ–ª—å**: –ü–æ—à–∞–≥–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ç–∞–±–ª–∏—Ü —Å –Ω–æ–≤—ã–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏

---

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

### –†–∞—Å–ø–∞—Ä—Å–µ–Ω–æ:
- ‚úÖ **272 –ø—Ä–æ–µ–∫—Ç–∞** –∏–∑ 3,261 (8.3%)
- ‚úÖ **1,825 completed** –ø—Ä–æ–µ–∫—Ç–æ–≤ (–≤–∫–ª—é—á–∞—è —Ä–∞–Ω–µ–µ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–µ)
- ‚úÖ –®–∞–±–ª–æ–Ω 1: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ –®–∞–±–ª–æ–Ω 2: –° –∫–æ–ª–æ–Ω–∫–æ–π "–ò—Ç–æ–≥–æ, —Ä—É–±"
- ‚úÖ –®–∞–±–ª–æ–Ω 3: –° "–û–±—Ä–∞–∑—Ü–æ–º" –≤–º–µ—Å—Ç–æ –ê–í–ò–ê

### –û–∂–∏–¥–∞—é—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞:
- ‚è≥ **1,431 pending** –ø—Ä–æ–µ–∫—Ç–æ–≤ (43.9%)
- ‚è≥ –í–æ–∑–º–æ–∂–Ω—ã –Ω–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã —Å—Ç—Ä—É–∫—Ç—É—Ä

---

## üéØ Workflow –¥–ª—è –Ω–æ–≤—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä

### –≠—Ç–∞–ø 1: –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```bash
# –®–∞–≥ 1.1: –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º pending –ø—Ä–æ–µ–∫—Ç—ã
python3 << 'EOF'
import sys
from pathlib import Path
sys.path.insert(0, str(Path.cwd()))
from src.structure_parser import CommercialProposalParser

parser = CommercialProposalParser()

# –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–µ—Ä–≤—ã–µ 100 pending –ø—Ä–æ–µ–∫—Ç–æ–≤
pending_files = Path('storage/excel_files').glob('project_*.xlsx')
results = []

for i, file in enumerate(pending_files):
    if i >= 100:
        break
    
    # –ü–∞—Ä—Å–∏–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É
    structure = parser.parse_table_structure(str(file))
    
    if not structure['is_valid']:
        results.append({
            'file': file.name,
            'reason': structure['validation_errors']
        })

# –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ –ø—Ä–∏—á–∏–Ω–∞–º
print("\nüìä –ü–†–ò–ß–ò–ù–´ –ù–ï–í–ê–õ–ò–î–ù–û–°–¢–ò:\n")
reasons = {}
for r in results:
    reason = r['reason'][0] if r['reason'] else 'Unknown'
    reasons[reason] = reasons.get(reason, 0) + 1

for reason, count in sorted(reasons.items(), key=lambda x: -x[1]):
    print(f"{count:3d} —Ñ–∞–π–ª–æ–≤: {reason}")
EOF
```

**–ß—Ç–æ –∏—Å–∫–∞—Ç—å:**
- –ù–æ–≤—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫
- –ù–æ–≤—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (–∫—Ä–æ–º–µ –ñ–î/–ê–í–ò–ê/–û–±—Ä–∞–∑–µ—Ü)
- –î—Ä—É–≥–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–Ω–µ —Å 4-–π —Å—Ç—Ä–æ–∫–∏)
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è

---

### –≠—Ç–∞–ø 2: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```bash
# –®–∞–≥ 2.1: –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
cat << 'EOF' > new_structure_profile.json
{
  "template_name": "–®–∞–±–ª–æ–Ω 4",
  "characteristics": {
    "data_start_row": 5,  // –ü—Ä–∏–º–µ—Ä: –¥–∞–Ω–Ω—ã–µ —Å 5-–π —Å—Ç—Ä–æ–∫–∏
    "columns": {
      "A": "Photo",
      "B": "Name",
      "C": "Article",     // –ù–æ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –∞—Ä—Ç–∏–∫—É–ª
      "D": "Description",
      "E": "Brand",        // –ù–æ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –±—Ä–µ–Ω–¥
      "F": "Quantity",
      "G": "Price_USD"
    },
    "routes": [
      {
        "type": "EXPRESS",  // –ù–æ–≤—ã–π —Ç–∏–ø –º–∞—Ä—à—Ä—É—Ç–∞
        "columns": {
          "qty": 6,
          "usd": 7,
          "rub": 8,
          "delivery": 9
        }
      }
    ]
  },
  "validation_rules": {
    "required_columns": ["A", "B", "C"],  // –ê—Ä—Ç–∏–∫—É–ª –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
    "min_routes": 1
  }
}
EOF
```

---

### –≠—Ç–∞–ø 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞

**–§–∞–π–ª**: `src/structure_parser.py`

```python
class CommercialProposalParser:
    
    KNOWN_TEMPLATES = {
        'standard': {
            'data_start_row': 4,
            'required_columns': ['A', 'B'],
            'route_patterns': ['–ñ–î', '–ê–í–ò–ê']
        },
        'with_total': {
            'data_start_row': 4,
            'required_columns': ['A', 'B'],
            'route_patterns': ['–ñ–î', '–ê–í–ò–ê'],
            'skip_columns': ['–ò—Ç–æ–≥–æ']  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —ç—Ç–∏ –∫–æ–ª–æ–Ω–∫–∏
        },
        'with_sample': {
            'data_start_row': 4,
            'required_columns': ['A', 'B'],
            'route_patterns': ['–ñ–î', '–û–±—Ä–∞–∑–µ—Ü']
        },
        # üÜï –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π —à–∞–±–ª–æ–Ω
        'express_route': {
            'data_start_row': 5,
            'required_columns': ['A', 'B', 'C'],  # + –∞—Ä—Ç–∏–∫—É–ª
            'route_patterns': ['EXPRESS', 'STANDARD']
        }
    }
    
    def detect_template(self, worksheet):
        """–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø —à–∞–±–ª–æ–Ω–∞ —Ç–∞–±–ª–∏—Ü—ã"""
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏
        headers = self._extract_headers(worksheet)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–π —à–∞–±–ª–æ–Ω
        for template_name, template_config in self.KNOWN_TEMPLATES.items():
            if self._matches_template(headers, template_config):
                return template_name, template_config
        
        return None, None
```

---

### –≠—Ç–∞–ø 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Å–µ—Ä–∞

**–§–∞–π–ª**: `parse_validated_files.py` (–Ω–æ–≤—ã–π)

```python
def parse_with_template(file_path, template_config):
    """
    –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–µ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —à–∞–±–ª–æ–Ω–∞
    """
    wb = load_workbook(file_path, data_only=True)
    ws = wb.active
    
    data_start_row = template_config['data_start_row']
    required_columns = template_config['required_columns']
    route_patterns = template_config['route_patterns']
    
    products = []
    
    for row in range(data_start_row, ws.max_row + 1):
        # –ò–∑–≤–ª–µ–∫–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ
        name = ws.cell(row, 2).value  # B –∫–æ–ª–æ–Ω–∫–∞
        if not name or len(str(name).strip()) < 3:
            continue
        
        # –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–æ–ø. –ø–æ–ª—è (–µ—Å–ª–∏ –µ—Å—Ç—å)
        article = None
        if 'C' in required_columns:
            article = ws.cell(row, 3).value
        
        # –ü–∞—Ä—Å–∏–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞
        offers = []
        for route_pattern in route_patterns:
            route_offers = parse_route_offers(
                ws, row, route_pattern, template_config
            )
            offers.extend(route_offers)
        
        if offers:
            products.append({
                'name': name,
                'article': article,
                'offers': offers
            })
    
    return products
```

---

### –≠—Ç–∞–ø 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –®–∞–≥ 5.1: –¢–µ—Å—Ç–∏—Ä—É–µ–º –Ω–∞ 10 —Ñ–∞–π–ª–∞—Ö –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞
python3 << 'EOF'
import sys
from pathlib import Path
sys.path.insert(0, str(Path.cwd()))

# –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞
test_files = [
    'project_1001_xxx.xlsx',
    'project_1002_yyy.xlsx',
    # ... –µ—â–µ 8 —Ñ–∞–π–ª–æ–≤
]

for file in test_files:
    result = parse_with_template(file, new_template_config)
    
    print(f"\nüìÅ {file}:")
    print(f"   –¢–æ–≤–∞—Ä—ã: {len(result['products'])}")
    print(f"   –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è: {result['total_offers']}")
    print(f"   –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: {result['total_images']}")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞—á–µ—Å—Ç–≤–æ
    if result['total_offers'] / len(result['products']) < 2:
        print(f"   ‚ö†Ô∏è  –ú–∞–ª–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –Ω–∞ —Ç–æ–≤–∞—Ä!")
EOF
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:**
- ‚úÖ –í—Å–µ —Ç–æ–≤–∞—Ä—ã —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º >= 3 —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ –ú–∏–Ω–∏–º—É–º 2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Ç–æ–≤–∞—Ä
- ‚úÖ –ú–∏–Ω–∏–º—É–º 1 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ —Ç–æ–≤–∞—Ä
- ‚úÖ –¶–µ–Ω—ã –≤ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–∞—Ö

---

### –≠—Ç–∞–ø 6: –ú–∞—Å—Å–æ–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥

```bash
# –®–∞–≥ 6.1: –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞
python3 validate_new_template_files.py

# –®–∞–≥ 6.2: –ü–∞—Ä—Å–∏–Ω–≥ –≤–∞–ª–∏–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
python3 parse_new_template_files.py

# –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:
# ‚úÖ –†–∞—Å–ø–∞—Ä—Å–µ–Ω–æ: 150 —Ñ–∞–π–ª–æ–≤
# ‚úÖ –¢–æ–≤–∞—Ä—ã: 450 (3 –Ω–∞ —Ñ–∞–π–ª –≤ —Å—Ä–µ–¥–Ω–µ–º)
# ‚úÖ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è: 1,350 (3 –Ω–∞ —Ç–æ–≤–∞—Ä)
# ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: 3,600 (8 –Ω–∞ —Ç–æ–≤–∞—Ä)
```

---

### –≠—Ç–∞–ø 7: –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

```bash
# –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–∫—Ä–∏–ø—Ç
python3 upload_images_multithread.py
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –Ω–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–±–µ–∑ `image_url`)
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –Ω–∞ FTP
- –û–±–Ω–æ–≤–ª—è–µ—Ç `image_url` –≤ –ë–î

---

### –≠—Ç–∞–ø 8: –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Railway

```bash
# –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–∫—Ä–∏–ø—Ç
python3 migrate_new_products_to_railway.py
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –ù–∞—Ö–æ–¥–∏—Ç –Ω–æ–≤—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –ø–æ `parsing_status = 'completed'`
- –ú–∏–≥—Ä–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –Ω–∞ Railway
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—á–µ—Ç—á–∏–∫–∏

---

### –≠—Ç–∞–ø 9: –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Railway
python3 check_railway_data.py

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞
python3 create_random_100_report.py
```

---

## üìù –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º:
- [ ] –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –º–∏–Ω–∏–º—É–º 10 —Ñ–∞–π–ª–æ–≤ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞
- [ ] –°–æ–∑–¥–∞–Ω –ø—Ä–æ—Ñ–∏–ª—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (JSON)
- [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
- [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Ç–∏–ø—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω `structure_parser.py` (–≤–∞–ª–∏–¥–∞—Ü–∏—è)
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω `parse_validated_files.py` (–ø–∞—Ä—Å–∏–Ω–≥)
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ 10 —Ñ–∞–π–ª–∞—Ö

### –ú–∞—Å—Å–æ–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥:
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞
- [ ] –ü–∞—Ä—Å–∏–Ω–≥ –≤–∞–ª–∏–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ (>= 2 offers/product)
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ FTP
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Railway
- [ ] –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω `DATABASE_SCHEMA_AND_VALIDATION.md`
- [ ] –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∏–º–µ—Ä –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- [ ] –°–æ–∑–¥–∞–Ω changelog

---

## üéØ –¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

### –ö–∞—á–µ—Å—Ç–≤–æ –ø–∞—Ä—Å–∏–Ω–≥–∞:
- ‚úÖ –£—Å–ø–µ—à–Ω–æ—Å—Ç—å >= 95%
- ‚úÖ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –Ω–∞ —Ç–æ–≤–∞—Ä >= 2.0
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ —Ç–æ–≤–∞—Ä >= 5.0
- ‚úÖ –í—Å–µ —Ü–µ–Ω—ã –≤ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–∞—Ö

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥: ~20-30 —Ñ–∞–π–ª–æ–≤/–º–∏–Ω
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: ~3-4 img/sec
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è: ~50-100 products/sec

---

## üîç –ê–Ω–∞–ª–∏–∑ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –ø—Ä–æ–µ–∫—Ç–æ–≤

### –¢–µ–∫—É—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
```
–í—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–æ–≤:   3,261
‚îú‚îÄ Completed:     1,825 (56.0%)
‚îú‚îÄ Pending:       1,431 (43.9%)  ‚Üê –¶–ï–õ–¨
‚îî‚îÄ Error:             5 (0.2%)
```

### –ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ pending:
```
–®–∞–±–ª–æ–Ω 1-3 (—É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è): ~800 —Ñ–∞–π–ª–æ–≤ (56%)
–®–∞–±–ª–æ–Ω 4 (–Ω–æ–≤—ã–µ –ø–æ–ª—è):           ~300 —Ñ–∞–π–ª–æ–≤ (21%)
–®–∞–±–ª–æ–Ω 5 (–º–∞—Ç—Ä–∏—á–Ω—ã–µ —Ü–µ–Ω—ã):       ~200 —Ñ–∞–π–ª–æ–≤ (14%)
–î—Ä—É–≥–∏–µ/–ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ:             ~131 —Ñ–∞–π–ª–æ–≤ (9%)
```

---

## üöÄ –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –®–∞–±–ª–æ–Ω—ã 1-3
**~800 —Ñ–∞–π–ª–æ–≤** —É–∂–µ –¥–æ–ª–∂–Ω—ã –ø–æ–¥—Ö–æ–¥–∏—Ç—å –ø–æ–¥ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —à–∞–±–ª–æ–Ω—ã

```bash
# –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–æ—á–µ–º—É –æ–Ω–∏ –Ω–µ —Ä–∞—Å–ø–∞—Ä—Å–∏–ª–∏—Å—å
python3 analyze_failed_validations.py

# –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
# - –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π
# - –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
# - –ù—É–∂–Ω–∞ –¥–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –®–∞–±–ª–æ–Ω 4 (–Ω–æ–≤—ã–µ –ø–æ–ª—è)
**~300 —Ñ–∞–π–ª–æ–≤** —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏

```bash
# –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å
# –û–±–Ω–æ–≤–ª—è–µ–º –ø–∞—Ä—Å–µ—Ä
# –¢–µ—Å—Ç–∏—Ä—É–µ–º –Ω–∞ 10 —Ñ–∞–π–ª–∞—Ö
# –ó–∞–ø—É—Å–∫–∞–µ–º –º–∞—Å—Å–æ–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –®–∞–±–ª–æ–Ω 5 (–º–∞—Ç—Ä–∏—á–Ω—ã–µ —Ü–µ–Ω—ã)
**~200 —Ñ–∞–π–ª–æ–≤** —Å –º–∞—Ç—Ä–∏—Ü–µ–π —Ü–µ–Ω (—Ü–µ–Ω–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç 2+ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)

```bash
# –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞
# –í–æ–∑–º–æ–∂–Ω–æ, –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –≤ –ë–î
```

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

**–ü—Ä–æ–µ–∫—Ç**: Commercial Proposals Parser  
**–ê–≤—Ç–æ—Ä**: Reshad  
**–î–∞—Ç–∞**: 08.10.2025

---

**–ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ —Å –Ω–æ–≤—ã–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏! üéâ**







**–î–∞—Ç–∞**: 08.10.2025  
**–¶–µ–ª—å**: –ü–æ—à–∞–≥–æ–≤—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ç–∞–±–ª–∏—Ü —Å –Ω–æ–≤—ã–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏

---

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

### –†–∞—Å–ø–∞—Ä—Å–µ–Ω–æ:
- ‚úÖ **272 –ø—Ä–æ–µ–∫—Ç–∞** –∏–∑ 3,261 (8.3%)
- ‚úÖ **1,825 completed** –ø—Ä–æ–µ–∫—Ç–æ–≤ (–≤–∫–ª—é—á–∞—è —Ä–∞–Ω–µ–µ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã–µ)
- ‚úÖ –®–∞–±–ª–æ–Ω 1: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- ‚úÖ –®–∞–±–ª–æ–Ω 2: –° –∫–æ–ª–æ–Ω–∫–æ–π "–ò—Ç–æ–≥–æ, —Ä—É–±"
- ‚úÖ –®–∞–±–ª–æ–Ω 3: –° "–û–±—Ä–∞–∑—Ü–æ–º" –≤–º–µ—Å—Ç–æ –ê–í–ò–ê

### –û–∂–∏–¥–∞—é—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞:
- ‚è≥ **1,431 pending** –ø—Ä–æ–µ–∫—Ç–æ–≤ (43.9%)
- ‚è≥ –í–æ–∑–º–æ–∂–Ω—ã –Ω–æ–≤—ã–µ —à–∞–±–ª–æ–Ω—ã —Å—Ç—Ä—É–∫—Ç—É—Ä

---

## üéØ Workflow –¥–ª—è –Ω–æ–≤—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä

### –≠—Ç–∞–ø 1: –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```bash
# –®–∞–≥ 1.1: –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º pending –ø—Ä–æ–µ–∫—Ç—ã
python3 << 'EOF'
import sys
from pathlib import Path
sys.path.insert(0, str(Path.cwd()))
from src.structure_parser import CommercialProposalParser

parser = CommercialProposalParser()

# –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–µ—Ä–≤—ã–µ 100 pending –ø—Ä–æ–µ–∫—Ç–æ–≤
pending_files = Path('storage/excel_files').glob('project_*.xlsx')
results = []

for i, file in enumerate(pending_files):
    if i >= 100:
        break
    
    # –ü–∞—Ä—Å–∏–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É
    structure = parser.parse_table_structure(str(file))
    
    if not structure['is_valid']:
        results.append({
            'file': file.name,
            'reason': structure['validation_errors']
        })

# –ì—Ä—É–ø–ø–∏—Ä—É–µ–º –ø–æ –ø—Ä–∏—á–∏–Ω–∞–º
print("\nüìä –ü–†–ò–ß–ò–ù–´ –ù–ï–í–ê–õ–ò–î–ù–û–°–¢–ò:\n")
reasons = {}
for r in results:
    reason = r['reason'][0] if r['reason'] else 'Unknown'
    reasons[reason] = reasons.get(reason, 0) + 1

for reason, count in sorted(reasons.items(), key=lambda x: -x[1]):
    print(f"{count:3d} —Ñ–∞–π–ª–æ–≤: {reason}")
EOF
```

**–ß—Ç–æ –∏—Å–∫–∞—Ç—å:**
- –ù–æ–≤—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–ª–æ–Ω–æ–∫
- –ù–æ–≤—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (–∫—Ä–æ–º–µ –ñ–î/–ê–í–ò–ê/–û–±—Ä–∞–∑–µ—Ü)
- –î—Ä—É–≥–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (–Ω–µ —Å 4-–π —Å—Ç—Ä–æ–∫–∏)
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è

---

### –≠—Ç–∞–ø 2: –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

```bash
# –®–∞–≥ 2.1: –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
cat << 'EOF' > new_structure_profile.json
{
  "template_name": "–®–∞–±–ª–æ–Ω 4",
  "characteristics": {
    "data_start_row": 5,  // –ü—Ä–∏–º–µ—Ä: –¥–∞–Ω–Ω—ã–µ —Å 5-–π —Å—Ç—Ä–æ–∫–∏
    "columns": {
      "A": "Photo",
      "B": "Name",
      "C": "Article",     // –ù–æ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –∞—Ä—Ç–∏–∫—É–ª
      "D": "Description",
      "E": "Brand",        // –ù–æ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞: –±—Ä–µ–Ω–¥
      "F": "Quantity",
      "G": "Price_USD"
    },
    "routes": [
      {
        "type": "EXPRESS",  // –ù–æ–≤—ã–π —Ç–∏–ø –º–∞—Ä—à—Ä—É—Ç–∞
        "columns": {
          "qty": 6,
          "usd": 7,
          "rub": 8,
          "delivery": 9
        }
      }
    ]
  },
  "validation_rules": {
    "required_columns": ["A", "B", "C"],  // –ê—Ä—Ç–∏–∫—É–ª –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω
    "min_routes": 1
  }
}
EOF
```

---

### –≠—Ç–∞–ø 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞

**–§–∞–π–ª**: `src/structure_parser.py`

```python
class CommercialProposalParser:
    
    KNOWN_TEMPLATES = {
        'standard': {
            'data_start_row': 4,
            'required_columns': ['A', 'B'],
            'route_patterns': ['–ñ–î', '–ê–í–ò–ê']
        },
        'with_total': {
            'data_start_row': 4,
            'required_columns': ['A', 'B'],
            'route_patterns': ['–ñ–î', '–ê–í–ò–ê'],
            'skip_columns': ['–ò—Ç–æ–≥–æ']  # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —ç—Ç–∏ –∫–æ–ª–æ–Ω–∫–∏
        },
        'with_sample': {
            'data_start_row': 4,
            'required_columns': ['A', 'B'],
            'route_patterns': ['–ñ–î', '–û–±—Ä–∞–∑–µ—Ü']
        },
        # üÜï –î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π —à–∞–±–ª–æ–Ω
        'express_route': {
            'data_start_row': 5,
            'required_columns': ['A', 'B', 'C'],  # + –∞—Ä—Ç–∏–∫—É–ª
            'route_patterns': ['EXPRESS', 'STANDARD']
        }
    }
    
    def detect_template(self, worksheet):
        """–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø —à–∞–±–ª–æ–Ω–∞ —Ç–∞–±–ª–∏—Ü—ã"""
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥–æ–ª–æ–≤–∫–∏
        headers = self._extract_headers(worksheet)
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–π —à–∞–±–ª–æ–Ω
        for template_name, template_config in self.KNOWN_TEMPLATES.items():
            if self._matches_template(headers, template_config):
                return template_name, template_config
        
        return None, None
```

---

### –≠—Ç–∞–ø 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Å–µ—Ä–∞

**–§–∞–π–ª**: `parse_validated_files.py` (–Ω–æ–≤—ã–π)

```python
def parse_with_template(file_path, template_config):
    """
    –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–µ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —à–∞–±–ª–æ–Ω–∞
    """
    wb = load_workbook(file_path, data_only=True)
    ws = wb.active
    
    data_start_row = template_config['data_start_row']
    required_columns = template_config['required_columns']
    route_patterns = template_config['route_patterns']
    
    products = []
    
    for row in range(data_start_row, ws.max_row + 1):
        # –ò–∑–≤–ª–µ–∫–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ
        name = ws.cell(row, 2).value  # B –∫–æ–ª–æ–Ω–∫–∞
        if not name or len(str(name).strip()) < 3:
            continue
        
        # –ò–∑–≤–ª–µ–∫–∞–µ–º –¥–æ–ø. –ø–æ–ª—è (–µ—Å–ª–∏ –µ—Å—Ç—å)
        article = None
        if 'C' in required_columns:
            article = ws.cell(row, 3).value
        
        # –ü–∞—Ä—Å–∏–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞
        offers = []
        for route_pattern in route_patterns:
            route_offers = parse_route_offers(
                ws, row, route_pattern, template_config
            )
            offers.extend(route_offers)
        
        if offers:
            products.append({
                'name': name,
                'article': article,
                'offers': offers
            })
    
    return products
```

---

### –≠—Ç–∞–ø 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –®–∞–≥ 5.1: –¢–µ—Å—Ç–∏—Ä—É–µ–º –Ω–∞ 10 —Ñ–∞–π–ª–∞—Ö –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞
python3 << 'EOF'
import sys
from pathlib import Path
sys.path.insert(0, str(Path.cwd()))

# –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞
test_files = [
    'project_1001_xxx.xlsx',
    'project_1002_yyy.xlsx',
    # ... –µ—â–µ 8 —Ñ–∞–π–ª–æ–≤
]

for file in test_files:
    result = parse_with_template(file, new_template_config)
    
    print(f"\nüìÅ {file}:")
    print(f"   –¢–æ–≤–∞—Ä—ã: {len(result['products'])}")
    print(f"   –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è: {result['total_offers']}")
    print(f"   –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: {result['total_images']}")
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞—á–µ—Å—Ç–≤–æ
    if result['total_offers'] / len(result['products']) < 2:
        print(f"   ‚ö†Ô∏è  –ú–∞–ª–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –Ω–∞ —Ç–æ–≤–∞—Ä!")
EOF
```

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —É—Å–ø–µ—Ö–∞:**
- ‚úÖ –í—Å–µ —Ç–æ–≤–∞—Ä—ã —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º >= 3 —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ –ú–∏–Ω–∏–º—É–º 2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –Ω–∞ —Ç–æ–≤–∞—Ä
- ‚úÖ –ú–∏–Ω–∏–º—É–º 1 –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–∞ —Ç–æ–≤–∞—Ä
- ‚úÖ –¶–µ–Ω—ã –≤ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–∞—Ö

---

### –≠—Ç–∞–ø 6: –ú–∞—Å—Å–æ–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥

```bash
# –®–∞–≥ 6.1: –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞
python3 validate_new_template_files.py

# –®–∞–≥ 6.2: –ü–∞—Ä—Å–∏–Ω–≥ –≤–∞–ª–∏–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
python3 parse_new_template_files.py

# –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:
# ‚úÖ –†–∞—Å–ø–∞—Ä—Å–µ–Ω–æ: 150 —Ñ–∞–π–ª–æ–≤
# ‚úÖ –¢–æ–≤–∞—Ä—ã: 450 (3 –Ω–∞ —Ñ–∞–π–ª –≤ —Å—Ä–µ–¥–Ω–µ–º)
# ‚úÖ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è: 1,350 (3 –Ω–∞ —Ç–æ–≤–∞—Ä)
# ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: 3,600 (8 –Ω–∞ —Ç–æ–≤–∞—Ä)
```

---

### –≠—Ç–∞–ø 7: –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

```bash
# –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–∫—Ä–∏–ø—Ç
python3 upload_images_multithread.py
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –ù–∞—Ö–æ–¥–∏—Ç –≤—Å–µ –Ω–æ–≤—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–±–µ–∑ `image_url`)
- –ó–∞–≥—Ä—É–∂–∞–µ—Ç –Ω–∞ FTP
- –û–±–Ω–æ–≤–ª—è–µ—Ç `image_url` –≤ –ë–î

---

### –≠—Ç–∞–ø 8: –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Railway

```bash
# –ò—Å–ø–æ–ª—å–∑—É–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Å–∫—Ä–∏–ø—Ç
python3 migrate_new_products_to_railway.py
```

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
- –ù–∞—Ö–æ–¥–∏—Ç –Ω–æ–≤—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –ø–æ `parsing_status = 'completed'`
- –ú–∏–≥—Ä–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ, –∫–æ—Ç–æ—Ä—ã—Ö –Ω–µ—Ç –Ω–∞ Railway
- –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—á–µ—Ç—á–∏–∫–∏

---

### –≠—Ç–∞–ø 9: –ü—Ä–æ–≤–µ—Ä–∫–∞

```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Railway
python3 check_railway_data.py

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞
python3 create_random_100_report.py
```

---

## üìù –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

### –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º:
- [ ] –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –º–∏–Ω–∏–º—É–º 10 —Ñ–∞–π–ª–æ–≤ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞
- [ ] –°–æ–∑–¥–∞–Ω –ø—Ä–æ—Ñ–∏–ª—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (JSON)
- [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
- [ ] –û–ø—Ä–µ–¥–µ–ª–µ–Ω—ã —Ç–∏–ø—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω `structure_parser.py` (–≤–∞–ª–∏–¥–∞—Ü–∏—è)
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω `parse_validated_files.py` (–ø–∞—Ä—Å–∏–Ω–≥)
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –Ω–∞ 10 —Ñ–∞–π–ª–∞—Ö

### –ú–∞—Å—Å–æ–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥:
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞
- [ ] –ü–∞—Ä—Å–∏–Ω–≥ –≤–∞–ª–∏–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ (>= 2 offers/product)
- [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ FTP
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ Railway
- [ ] –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω `DATABASE_SCHEMA_AND_VALIDATION.md`
- [ ] –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–∏–º–µ—Ä –Ω–æ–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- [ ] –°–æ–∑–¥–∞–Ω changelog

---

## üéØ –¶–µ–ª–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏

### –ö–∞—á–µ—Å—Ç–≤–æ –ø–∞—Ä—Å–∏–Ω–≥–∞:
- ‚úÖ –£—Å–ø–µ—à–Ω–æ—Å—Ç—å >= 95%
- ‚úÖ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –Ω–∞ —Ç–æ–≤–∞—Ä >= 2.0
- ‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ —Ç–æ–≤–∞—Ä >= 5.0
- ‚úÖ –í—Å–µ —Ü–µ–Ω—ã –≤ —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–∞—Ö

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥: ~20-30 —Ñ–∞–π–ª–æ–≤/–º–∏–Ω
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: ~3-4 img/sec
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è: ~50-100 products/sec

---

## üîç –ê–Ω–∞–ª–∏–∑ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –ø—Ä–æ–µ–∫—Ç–æ–≤

### –¢–µ–∫—É—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
```
–í—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–æ–≤:   3,261
‚îú‚îÄ Completed:     1,825 (56.0%)
‚îú‚îÄ Pending:       1,431 (43.9%)  ‚Üê –¶–ï–õ–¨
‚îî‚îÄ Error:             5 (0.2%)
```

### –ü—Ä–∏–º–µ—Ä–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ pending:
```
–®–∞–±–ª–æ–Ω 1-3 (—É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è): ~800 —Ñ–∞–π–ª–æ–≤ (56%)
–®–∞–±–ª–æ–Ω 4 (–Ω–æ–≤—ã–µ –ø–æ–ª—è):           ~300 —Ñ–∞–π–ª–æ–≤ (21%)
–®–∞–±–ª–æ–Ω 5 (–º–∞—Ç—Ä–∏—á–Ω—ã–µ —Ü–µ–Ω—ã):       ~200 —Ñ–∞–π–ª–æ–≤ (14%)
–î—Ä—É–≥–∏–µ/–ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ:             ~131 —Ñ–∞–π–ª–æ–≤ (9%)
```

---

## üöÄ –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –®–∞–±–ª–æ–Ω—ã 1-3
**~800 —Ñ–∞–π–ª–æ–≤** —É–∂–µ –¥–æ–ª–∂–Ω—ã –ø–æ–¥—Ö–æ–¥–∏—Ç—å –ø–æ–¥ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —à–∞–±–ª–æ–Ω—ã

```bash
# –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º –ø–æ—á–µ–º—É –æ–Ω–∏ –Ω–µ —Ä–∞—Å–ø–∞—Ä—Å–∏–ª–∏—Å—å
python3 analyze_failed_validations.py

# –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
# - –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π
# - –ü–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
# - –ù—É–∂–Ω–∞ –¥–æ–Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –®–∞–±–ª–æ–Ω 4 (–Ω–æ–≤—ã–µ –ø–æ–ª—è)
**~300 —Ñ–∞–π–ª–æ–≤** —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∫–æ–ª–æ–Ω–∫–∞–º–∏

```bash
# –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—ã–π –ø—Ä–æ—Ñ–∏–ª—å
# –û–±–Ω–æ–≤–ª—è–µ–º –ø–∞—Ä—Å–µ—Ä
# –¢–µ—Å—Ç–∏—Ä—É–µ–º –Ω–∞ 10 —Ñ–∞–π–ª–∞—Ö
# –ó–∞–ø—É—Å–∫–∞–µ–º –º–∞—Å—Å–æ–≤—ã–π –ø–∞—Ä—Å–∏–Ω–≥
```

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –®–∞–±–ª–æ–Ω 5 (–º–∞—Ç—Ä–∏—á–Ω—ã–µ —Ü–µ–Ω—ã)
**~200 —Ñ–∞–π–ª–æ–≤** —Å –º–∞—Ç—Ä–∏—Ü–µ–π —Ü–µ–Ω (—Ü–µ–Ω–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç 2+ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)

```bash
# –¢—Ä–µ–±—É–µ—Ç—Å—è –Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞
# –í–æ–∑–º–æ–∂–Ω–æ, –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –≤ –ë–î
```

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã

**–ü—Ä–æ–µ–∫—Ç**: Commercial Proposals Parser  
**–ê–≤—Ç–æ—Ä**: Reshad  
**–î–∞—Ç–∞**: 08.10.2025

---

**–ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ —Å –Ω–æ–≤—ã–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏! üéâ**













