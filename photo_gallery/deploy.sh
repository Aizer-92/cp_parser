#!/bin/bash

# –°–∫—Ä–∏–ø—Ç –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –≥–∞–ª–µ—Ä–µ–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: ./deploy.sh /path/to/photos

if [ $# -eq 0 ]; then
    echo "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: $0 /path/to/photos"
    echo "–ü—Ä–∏–º–µ—Ä: $0 /home/user/photos"
    exit 1
fi

PHOTOS_PATH="$1"

echo "üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –≥–∞–ª–µ—Ä–µ–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π..."
echo "üìÅ –ü—É—Ç—å –∫ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º: $PHOTOS_PATH"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–∞–ø–∫–∏ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏
if [ ! -d "$PHOTOS_PATH" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: –ü–∞–ø–∫–∞ $PHOTOS_PATH –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
if [ ! -r "$PHOTOS_PATH" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞: –ù–µ—Ç –ø—Ä–∞–≤ –Ω–∞ —á—Ç–µ–Ω–∏–µ –ø–∞–ø–∫–∏ $PHOTOS_PATH!"
    exit 1
fi

echo "‚úÖ –ü–∞–ø–∫–∞ —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ –Ω–∞–π–¥–µ–Ω–∞ –∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è —á—Ç–µ–Ω–∏—è"

# –û–±–Ω–æ–≤–ª—è–µ–º –ø—É—Ç–∏ –≤ PHP —Ñ–∞–π–ª–µ
if [ -f "api/photos.php" ]; then
    echo "üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PHP –≤–µ—Ä—Å–∏–∏..."
    sed -i "s|/path/to/your/photos/|$PHOTOS_PATH|g" api/photos.php
    echo "‚úÖ PHP –≤–µ—Ä—Å–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞"
fi

# –û–±–Ω–æ–≤–ª—è–µ–º –ø—É—Ç–∏ –≤ Node.js —Ñ–∞–π–ª–µ
if [ -f "server.js" ]; then
    echo "üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Node.js –≤–µ—Ä—Å–∏–∏..."
    sed -i "s|/path/to/your/photos/|$PHOTOS_PATH|g" server.js
    echo "‚úÖ Node.js –≤–µ—Ä—Å–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞"
fi

echo ""
echo "üéâ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"
echo ""
echo "üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:"
echo "1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–∞–π–ª—ã –Ω–∞ –≤–∞—à –≤–µ–±-—Å–µ—Ä–≤–µ—Ä"
echo "2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π"
echo "3. –û—Ç–∫—Ä–æ–π—Ç–µ index.html –≤ –±—Ä–∞—É–∑–µ—Ä–µ"
echo ""
echo "üìñ –ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ README.md"
