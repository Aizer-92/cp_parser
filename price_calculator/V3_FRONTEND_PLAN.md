# V3 FRONTEND UI - ДЕТАЛЬНЫЙ ПЛАН

## ДИЗАЙН-КОНЦЕПЦИЯ

### Стиль
- Цветовая схема: светлый фон (#f3f4f6), акценты (#3b82f6, #10b981)
- Типографика: system fonts (Apple/Segoe UI)
- Компоненты: карточки с тенью, плавные переходы
- **БЕЗ ЭМОДЗИ** - только текст и иконки

### Ключевые отличия от V2
1. **Работа с Позициями** - создаем/выбираем позицию один раз
2. **Множественные расчёты** - один товар, разные фабрики/тиражи
3. **Сравнение вариантов** - сравниваем расчёты side-by-side
4. **Облачное хранилище** - фото загружаются на SFTP

---

## АРХИТЕКТУРА UI (2 ОСНОВНЫХ РЕЖИМА)

### РЕЖИМ 1: QUICK MODE (Быстрый расчёт)
**Для быстрых одноразовых расчётов**

```
┌─────────────────────────────────────────────┐
│  БЫСТРЫЙ РАСЧЁТ                            │
├─────────────────────────────────────────────┤
│  Товар: [Футболка хлопковая_________]      │
│  Категория: [футболка ▼] (автоопределение) │
│  Цена (¥): [15.5] Кол-во: [1000] Вес: [0.2]│
│  Наценка: [1.7]                             │
│  Фабрика/WeChat: [____________] [Из списка] │
│  [Рассчитать] [Сохранить в Позиции]        │
└─────────────────────────────────────────────┘
         ↓
┌─────────────────────────────────────────────┐
│  РЕЗУЛЬТАТЫ                                 │
│  ├─ ЖД: 350₽ → 595₽ (прибыль 245₽)        │
│  ├─ Авиа: 380₽ → 646₽ (прибыль 266₽)      │
│  ├─ Контракт: 330₽ → 561₽ (прибыль 231₽)  │
│  ├─ Prologix: 340₽ → 578₽ (прибыль 238₽)  │
│  └─ Море: 310₽ → 527₽ (прибыль 217₽)      │
│  [Кастомные ставки] [Сохранить]            │
└─────────────────────────────────────────────┘
```

---

### РЕЖИМ 2: POSITION MODE (Работа с позициями)

#### ШАГ 1: Список позиций
```
┌─────────────────────────────────────────────────────────┐
│  ПОЗИЦИИ                              [+ Новая позиция] │
├─────────────────────────────────────────────────────────┤
│  [Поиск позиций_____________________] [Фильтр ▼]       │
│                                                          │
│  ┌─────────────────────────────────────────────────┐   │
│  │ Футболка хлопковая с принтом                    │   │
│  │ Категория: футболка                             │   │
│  │ Фото: 3 шт • Расчётов: 3 • 12.10.2025          │   │
│  │ [Открыть] [Редактировать] [Удалить]             │   │
│  └─────────────────────────────────────────────────┘   │
│                                                          │
│  ┌─────────────────────────────────────────────────┐   │
│  │ Бутылка термос с гравировкой                    │   │
│  │ Категория: бутылка                              │   │
│  │ Фото: 2 шт • Расчётов: 5 • 10.10.2025          │   │
│  │ [Открыть] [Редактировать] [Удалить]             │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

#### ШАГ 2: Создание/Редактирование позиции
```
┌─────────────────────────────────────────────────────────┐
│  НОВАЯ ПОЗИЦИЯ                                          │
├─────────────────────────────────────────────────────────┤
│  ОСНОВНАЯ ИНФОРМАЦИЯ                                    │
│  Название: [___________________________________]        │
│  Категория: [футболка ▼]                               │
│                                                          │
│  Описание:                                              │
│  [Хлопковая футболка 180г/м², размеры XS-3XL___]       │
│  [____________________________________________]         │
│                                                          │
│  Кастомизация:                                          │
│  [Печать шелкография, логотип на груди_______]         │
│  [____________________________________________]         │
│                                                          │
│  ФОТОГРАФИИ                                             │
│  ┌──────────────────────────────────────────┐          │
│  │ Перетащите фото сюда или нажмите         │          │
│  │ [Выбрать файлы]                           │          │
│  └──────────────────────────────────────────┘          │
│                                                          │
│  Загруженные:                                           │
│  ┌─────┐ ┌─────┐ ┌─────┐                              │
│  │ IMG │ │ IMG │ │ IMG │                              │
│  │ 1   │ │ 2   │ │ 3   │                              │
│  └─────┘ └─────┘ └─────┘                              │
│  [Основная] [×]  [×]                                    │
│                                                          │
│  ДОПОЛНИТЕЛЬНО                                          │
│  Материал: [cotton___]  Цвета: [white, black___]      │
│  Вес образца: [white, black___]                        │
│                                                          │
│  [Отмена] [Сохранить]                                   │
└─────────────────────────────────────────────────────────┘
```

#### ШАГ 3: Детали позиции с расчётами
```
┌─────────────────────────────────────────────────────────┐
│  ← Назад       ФУТБОЛКА ХЛОПКОВАЯ          [Редактир.] │
├─────────────────────────────────────────────────────────┤
│  ИНФОРМАЦИЯ                                             │
│  • Категория: футболка                                  │
│  • Описание: Хлопок 180г/м², размеры XS-3XL            │
│  • Кастомизация: Печать шелкография, логотип на груди  │
│  • Фотографии: 3 шт                                     │
│                                                          │
│  [Посмотреть фото]                                      │
├─────────────────────────────────────────────────────────┤
│  РАСЧЁТЫ                               [+ Новый расчёт] │
│                                                          │
│  ┌──────────────────────────────────────────────────┐  │
│  │ Фабрика А • 500 шт • 15.5¥/шт                    │  │
│  │ ЖД: 350₽  Авиа: 380₽  Контракт: 330₽ ★         │  │
│  │ Prologix: 340₽  Море: 310₽ ★★                   │  │
│  │ Образец: 7д • Производство: 15д                  │  │
│  │ 12.10.2025  [Детали] [Пересчитать] [Удалить]    │  │
│  └──────────────────────────────────────────────────┘  │
│                                                          │
│  ┌──────────────────────────────────────────────────┐  │
│  │ Фабрика Б • 500 шт • 14.0¥/шт                    │  │
│  │ ЖД: 320₽ ★  Авиа: 350₽  Контракт: 300₽ ★★     │  │
│  │ Образец: 5д • Производство: 12д                  │  │
│  │ 10.10.2025  [Детали] [Пересчитать] [Удалить]    │  │
│  └──────────────────────────────────────────────────┘  │
│                                                          │
│  ┌──────────────────────────────────────────────────┐  │
│  │ Фабрика А • 1000 шт • 12.8¥/шт                   │  │
│  │ ЖД: 290₽ ★  Авиа: 315₽  Контракт: 270₽ ★★★    │  │
│  │ 08.10.2025  [Детали] [Пересчитать] [Удалить]    │  │
│  └──────────────────────────────────────────────────┘  │
│                                                          │
│  [☑] [☑] [ ] Выбрано: 2    [Сравнить выбранные]       │
└─────────────────────────────────────────────────────────┘
```

#### ШАГ 4: Новый расчёт для позиции
```
┌─────────────────────────────────────────────────────────┐
│  ← К позиции       НОВЫЙ РАСЧЁТ: Футболка               │
├─────────────────────────────────────────────────────────┤
│  ФАБРИКА                                                │
│  URL/WeChat: [https://wechat.com/factory_a___]         │
│  [Выбрать из списка ▼]                                  │
│                                                          │
│  Выбрано: Фабрика А                                     │
│  • Сроки: образец 7д, производство 15д                  │
│  • Стандартная цена образца: 10¥                        │
│                                                          │
│  Комментарий: [Хорошее качество, быстрая доставка___]  │
│                                                          │
│  ПАРАМЕТРЫ РАСЧЁТА                                      │
│  Цена за единицу (¥): [15.5]                           │
│  Количество (шт): [500]                                 │
│  Наценка: [1.7]                                         │
│                                                          │
│  ВЕС И УПАКОВКА                                         │
│  ( ) Быстрый: Вес единицы [0.2] кг                    │
│  (•) Детальный: Упаковка                                │
│      Единиц в коробке: [50]                             │
│      Вес коробки: [12.5] кг                             │
│      Размеры (м): [0.6] × [0.4] × [0.5]                │
│                                                          │
│  [Отмена] [Рассчитать]                                  │
└─────────────────────────────────────────────────────────┘
         ↓
┌─────────────────────────────────────────────────────────┐
│  РЕЗУЛЬТАТЫ РАСЧЁТА                                     │
│  [← Изменить параметры]                                 │
├─────────────────────────────────────────────────────────┤
│  Футболка • Фабрика А • 500 шт × 15.5¥                 │
│                                                          │
│  ┌────────────────────────────────────────────────┐    │
│  │ ЖД                                              │    │
│  │ Себестоимость: 350₽/шт → Продажа: 595₽        │    │
│  │ Прибыль: 245₽ • Всего: 175,000₽ → 297,500₽    │    │
│  │ [Детали] [Кастомная ставка]                    │    │
│  └────────────────────────────────────────────────┘    │
│                                                          │
│  ┌────────────────────────────────────────────────┐    │
│  │ АВИА                                            │    │
│  │ Себестоимость: 380₽/шт → Продажа: 646₽        │    │
│  │ Прибыль: 266₽ • Всего: 190,000₽ → 323,000₽    │    │
│  │ [Детали] [Кастомная ставка]                    │    │
│  └────────────────────────────────────────────────┘    │
│                                                          │
│  ┌────────────────────────────────────────────────┐    │
│  │ КОНТРАКТ                                        │    │
│  │ Себестоимость: 330₽/шт → Продажа: 561₽        │    │
│  │ Прибыль: 231₽ • Всего: 165,000₽ → 280,500₽    │    │
│  │ ЛУЧШИЙ! [Детали] [Кастомная ставка]            │    │
│  └────────────────────────────────────────────────┘    │
│                                                          │
│  ┌────────────────────────────────────────────────┐    │
│  │ PROLOGIX (расчет по объёму)                     │    │
│  │ Себестоимость: 340₽/шт → Продажа: 578₽        │    │
│  │ Прибыль: 238₽ • Всего: 170,000₽ → 289,000₽    │    │
│  │ [Детали] [Кастомная ставка]                    │    │
│  └────────────────────────────────────────────────┘    │
│                                                          │
│  ┌────────────────────────────────────────────────┐    │
│  │ МОРЕ (контейнер)                                │    │
│  │ Себестоимость: 310₽/шт → Продажа: 527₽        │    │
│  │ Прибыль: 217₽ • Всего: 155,000₽ → 263,500₽    │    │
│  │ Контейнеров: 2×40ft [Детали]                   │    │
│  └────────────────────────────────────────────────┘    │
│                                                          │
│  [Сохранить расчёт] [Сравнить с другими]               │
└─────────────────────────────────────────────────────────┘
```

---

## СРАВНЕНИЕ РАСЧЁТОВ

```
┌─────────────────────────────────────────────────────────────────┐
│  СРАВНЕНИЕ: Футболка хлопковая                      [← Назад]  │
├─────────────────────────────────────────────────────────────────┤
│              │ Фабрика А    │ Фабрика Б    │ Фабрика А          │
│              │ 500×15.5¥    │ 500×14.0¥    │ 1000×12.8¥         │
├──────────────┼──────────────┼──────────────┼────────────────────┤
│ Фабрика      │ Фабрика А    │ Фабрика Б    │ Фабрика А          │
│ Цена/шт      │ 15.5¥        │ 14.0¥        │ 12.8¥  ★ ЛУЧШЕ   │
│ Тираж        │ 500 шт       │ 500 шт       │ 1000 шт            │
├──────────────┼──────────────┼──────────────┼────────────────────┤
│ ЖД           │ 350₽        │ 320₽        │ 290₽  ★ ЛУЧШЕ   │
│ Авиа         │ 380₽        │ 350₽        │ 315₽  ★ ЛУЧШЕ   │
│ Контракт     │ 330₽ ★      │ 300₽ ★★    │ 270₽  ★★★        │
│ Prologix     │ 340₽        │ 330₽        │ 305₽  ★ ЛУЧШЕ   │
│ Море         │ 310₽        │ 290₽ ★     │ 265₽  ★★ ЛУЧШЕ  │
├──────────────┼──────────────┼──────────────┼────────────────────┤
│ Прибыль      │ 245₽        │ 230₽        │ 280₽  ★ ЛУЧШЕ   │
│ Образец      │ 7 дней       │ 5 дней ★   │ 7 дней             │
│ Производство │ 15 дней      │ 12 дней ★  │ 15 дней            │
├──────────────┼──────────────┼──────────────┼────────────────────┤
│ Всего        │ 165,000₽     │ 150,000₽ ★ │ 270,000₽           │
│ Выручка      │ 280,500₽     │ 255,000₽    │ 459,000₽  ★       │
└─────────────────────────────────────────────────────────────────┘

РЕКОМЕНДАЦИЯ:
• Лучшая цена за единицу: Фабрика Б Контракт (300₽)
• Лучшая цена при масштабе: Фабрика А 1000шт Контракт (270₽)
• Самые быстрые сроки: Фабрика Б (5+12 = 17 дней)
```

---

## НАВИГАЦИЯ

### Главное меню (Табы)
```
┌─────────────────────────────────────────────────────────┐
│  [Быстрый] [Позиции] [Фабрики] [История]              │
└─────────────────────────────────────────────────────────┘
```

---

## ТЕХНИЧЕСКИЕ КОМПОНЕНТЫ

### Vue компоненты
```
QuickModeV3.js              // Быстрый режим
PositionsListV3.js          // Список позиций
PositionDetailsV3.js        // Детали позиции + расчёты
PositionFormV3.js           // Создание/редактирование позиции
CalculationFormV3.js        // Форма нового расчёта
CalculationResultsV3.js     // Результаты с ВСЕМИ маршрутами
FactorySelectorV3.js        // Выбор фабрики
FactoriesManagerV3.js       // Управление фабриками
CompareCalculationsV3.js    // Сравнение
PhotoUploaderV3.js          // Загрузка фото на SFTP
```

### Композаблы
```
useFactoriesV3.js           // CRUD фабрик
usePositionsV3.js           // CRUD позиций
useCalculationsV3.js        // CRUD расчётов + recalculate
useSFTPUpload.js           // Загрузка на SFTP beget.cloud
```

### SFTP Configuration
```javascript
// В .env или конфиге
SFTP_HOST=sftp.ru1.storage.beget.cloud
SFTP_USER=RECD00AQJIM4300MLJ0W
SFTP_PASSWORD=FIucJ3i9iIWZ5ieJvabvI0OxEn2Yv4gG5XRUeSNf
SFTP_PATH=/calc/
```

---

## МАРШРУТЫ ЛОГИСТИКИ

### Поддерживаемые маршруты (динамически)
- Highway ЖД
- Highway Авиа
- Highway Контракт
- Prologix (по объёму)
- Море контейнер
- **Будущие маршруты** - UI автоматически адаптируется

### Отображение маршрутов
```javascript
// Динамическое отображение всех маршрутов из API
routes.forEach(route => {
  // Генерируем карточку независимо от типа маршрута
  renderRouteCard(route)
})
```

---

## UX ФЛОУ

### Быстрый расчёт (30 сек)
1. Таб "Быстрый"
2. Ввод: товар → категория авто
3. Цена, количество, вес
4. WeChat/ссылка (опционально)
5. Клик "Рассчитать" → ВСЕ маршруты
6. Копирование результатов

### Детальный проект (5-7 мин)
1. Таб "Позиции" → Новая
2. Название, описание, кастомизация
3. Загрузка фото (→ beget.cloud/calc/)
4. Создание расчётов:
   - Фабрика А: 500 шт × 15¥
   - Фабрика Б: 500 шт × 14¥
   - Фабрика А: 1000 шт × 12.8¥
5. Сравнение → выбор лучшего
6. Отправка клиенту

---

## ПЛАН РАЗРАБОТКИ

### Этап 1: Базовая инфраструктура (1-2 часа)
- Структура файлов
- Композаблы для V3 API
- SFTP загрузчик фото

### Этап 2: Quick Mode (2-3 часа)
- QuickModeV3.js
- Простая форма + все маршруты
- Standalone работа

### Этап 3: Positions (3-4 часа)
- PositionsListV3.js
- PositionFormV3.js с фото
- PositionDetailsV3.js

### Этап 4: Calculations (2-3 часа)
- CalculationFormV3.js
- CalculationResultsV3.js
- Интеграция с Position

### Этап 5: Compare (2 часа)
- CompareCalculationsV3.js
- Таблица сравнения
- Рекомендации

### Этап 6: Factories (1 час)
- FactorySelectorV3.js
- FactoriesManagerV3.js

### Этап 7: Integration (1 час)
- Интеграция истории
- Финальная полировка

---

## ОСОБЕННОСТИ РЕАЛИЗАЦИИ

### 1. Фотографии
- Drag & drop область
- Загрузка на beget.cloud SFTP → /calc/
- Первая фото = основная (метка)
- Превью перед сохранением

### 2. Фабрики
- Поле WeChat/URL - основное
- Кнопка "Из списка" рядом → быстрый выбор
- Автозаполнение из истории

### 3. Маршруты
- Динамическое отображение
- Любые новые маршруты из API → автоматически в UI
- Одинаковый шаблон карточки для всех

### 4. Кастомизация vs Описание
- **Описание**: что это за товар (материал, размеры, вес)
- **Кастомизация**: что делаем с товаром (печать, гравировка, упаковка)

---

## НАЧИНАЕМ?

Готов начать реализацию с Этапа 1 (Базовая инфраструктура).

