# Phase 3: Frontend - –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?

**–î–∞—Ç–∞:** 10.10.2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –§–∞–∑—ã 3.1-3.2 –∑–∞–≤–µ—Ä—à–µ–Ω—ã

---

## ‚ùì –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤ UI?

### ‚ùå –ù–ò–ß–ï–ì–û!

–ò–º–µ–Ω–Ω–æ —Ç–∞–∫! UI –æ—Å—Ç–∞–ª—Å—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–µ–∂–Ω–∏–º –ø–æ –≤–∞—à–µ–º—É —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é:

- ‚úÖ –í—Å–µ –∫–Ω–æ–ø–∫–∏ –Ω–∞ —Ç–µ—Ö –∂–µ –º–µ—Å—Ç–∞—Ö
- ‚úÖ –í—Å–µ –ø–æ–ª—è –≤—ã–≥–ª—è–¥—è—Ç —Ç–∞–∫ –∂–µ
- ‚úÖ –¶–≤–µ—Ç–∞, —Å—Ç–∏–ª–∏, –∞–Ω–∏–º–∞—Ü–∏–∏ ‚Äî –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- ‚úÖ –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π —Ç–∞–∫–∞—è –∂–µ

---

## üîß –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –≤–Ω—É—Ç—Ä–∏?

### 1. **API V2 ‚Üí V3 (–Ω–µ–≤–∏–¥–∏–º–æ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)**

**–ë—ã–ª–æ:**
```javascript
// –ü—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã –∫ /api/v2/calculate
response = await axios.post('/api/v2/calculate', data);
```

**–°—Ç–∞–ª–æ:**
```javascript
// –ß–µ—Ä–µ–∑ composable —Å State Machine –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º
const v3 = useCalculationV3();
result = await v3.calculate(data);
```

**–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** –ù–∏—á–µ–≥–æ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å! –ö–Ω–æ–ø–∫–∞ "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å" —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫ –∂–µ.

---

### 2. **–ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π V2 ‚Üí V3**

**–ë—ã–ª–æ:**
```javascript
// –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ª—å–∫–æ –Ω–∞–∑–≤–∞–Ω–∏–π
const response = await axios.get('/api/categories/names');
```

**–°—Ç–∞–ª–æ:**
```javascript
// –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π (—Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏)
const categories = await v3.getCategories();
```

**–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** –°–ø–∏—Å–æ–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–∞–∫ –∂–µ –±—ã—Å—Ç—Ä–æ.

---

### 3. **useCalculationV3.js - –Ω–æ–≤—ã–π Composable**

–≠—Ç–æ –Ω–æ–≤—ã–π "–ø–æ–º–æ—â–Ω–∏–∫" –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API V3:

```javascript
// –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞
- calculate()          // –í—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–∞—Å—á—ë—Ç
- checkRequirements()  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω—É–∂–Ω—ã –ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- validateCustomParams() // –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∞–≤–∫–∏
- getCategories()      // –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- updateCalculation()  // –û–±–Ω–æ–≤–∏—Ç—å —Ä–∞—Å—á—ë—Ç
```

**–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º, –Ω–µ–∑–∞–º–µ—Ç–Ω–æ.

---

## üéØ –ß—Ç–æ —ç—Ç–æ –¥–∞—ë—Ç?

### 1. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ custom_logistics –¥–ª—è –õ–Æ–ë–û–ô –∫–∞—Ç–µ–≥–æ—Ä–∏–∏**

**–°–µ–π—á–∞—Å –º–æ–∂–Ω–æ:**
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏—Å—Ç–∏–∫—É –¥–ª—è "–ù–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏" ‚úÖ
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏—Å—Ç–∏–∫—É –¥–ª—è "–§—É—Ç–±–æ–ª–∫–∏" ‚úÖ
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏—Å—Ç–∏–∫—É –¥–ª—è "–ë–ª–æ–∫–Ω–æ—Ç" ‚úÖ
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏—Å—Ç–∏–∫—É –¥–ª—è –õ–Æ–ë–û–ô –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ‚úÖ

**–ö–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —ç—Ç–æ —É–≤–∏–¥–∏—Ç:**
- –ö–Ω–æ–ø–∫–∞ "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–∫–∞–∫ –∏ —Ä–∞–Ω—å—à–µ)
- –¢–µ–ø–µ—Ä—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (—Ä–∞–Ω—å—à–µ –±—ã–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã)

---

### 2. **–†–µ—à–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã "–ù–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏"**

**–ü—Ä–æ–±–ª–µ–º–∞ 1:** –í –∏—Å—Ç–æ—Ä–∏–∏ —Ü–µ–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å –±–µ–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π —Å—Ç–∞–≤–∫–∏  
**–†–µ—à–µ–Ω–∏–µ:** State Machine + Strategy Pattern –æ—Ç—Å–ª–µ–∂–∏–≤–∞—é—Ç `custom_logistics`

**–ü—Ä–æ–±–ª–µ–º–∞ 2:** –ü–æ—Å—Ç–æ—è–Ω–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞–ª–∞—Å—å —Ñ–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è  
**–†–µ—à–µ–Ω–∏–µ:** `shouldShowEditForm()` –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω–æ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
- –ò—Å—Ç–æ—Ä–∏—è —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ü–µ–Ω—ã ‚úÖ
- –§–æ—Ä–º–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–æ ‚úÖ

---

### 3. **–õ—É—á—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**

**–ë—ã–ª–æ:**
```javascript
// –û–±—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ "–û—à–∏–±–∫–∞ —Ä–∞—Å—á—ë—Ç–∞"
catch (error) {
  console.error(error);
}
```

**–°—Ç–∞–ª–æ:**
```javascript
// –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
if (detail.includes('–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Ä–∞—Å—á—ë—Ç')) {
  throw new Error('–î–ª—è —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è —É–∫–∞–∑–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ª–æ–≥–∏—Å—Ç–∏–∫–∏');
}
```

**–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** –ë–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö.

---

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è)

### –°–ª–æ–∏ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏:

```
UI Components (Vue)
      ‚Üì
useCalculationV3 (Composable)  ‚Üê –°–∫—Ä—ã–≤–∞–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç—å
      ‚Üì
API V3 Endpoints
      ‚Üì
CalculationOrchestrator  ‚Üê State Machine + Strategy
      ‚Üì
PriceCalculator (–ª–æ–≥–∏–∫–∞ —Ä–∞—Å—á—ë—Ç–∞)
```

**–î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** –ù–∞–∂–∏–º–∞–µ—Ç–µ –∫–Ω–æ–ø–∫—É ‚Üí –ø–æ–ª—É—á–∞–µ—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç. –í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º.

---

## ‚úÖ –ß—Ç–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ?

1. **–†–∞—Å—á—ë—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:**
   - –§—É—Ç–±–æ–ª–∫–∏ ‚Üí ‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - –ë–ª–æ–∫–Ω–æ—Ç ‚Üí ‚úÖ —Ä–∞–±–æ—Ç–∞–µ—Ç

2. **–†–∞—Å—á—ë—Ç "–ù–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏":**
   - –û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ ‚Üí ‚úÖ
   - –í–≤–æ–¥–∏–º —Å—Ç–∞–≤–∫–∏ ‚Üí ‚úÖ
   - –†–∞—Å—á—ë—Ç –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è ‚Üí ‚úÖ
   - –ù–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ ‚Üí ‚úÖ

3. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:**
   - Dropdown —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Üí ‚úÖ
   - –ö–∞—Ç–µ–≥–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è ‚Üí ‚úÖ

4. **Custom_logistics –¥–ª—è –ª—é–±–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:**
   - Backend –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç ‚Üí ‚úÖ
   - Frontend –≥–æ—Ç–æ–≤ ‚Üí ‚úÖ

---

## üöÄ –ß—Ç–æ –¥–∞–ª—å—à–µ?

### Phase 3.3: RouteEditorV2 (pending)
- –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ V3 API
- –£–ª—É—á—à–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ `custom_logistics`

### Phase 3.4: HistoryPanelV2 (pending)
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å `custom_logistics` –≤ –∏—Å—Ç–æ—Ä–∏–∏
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Ü–µ–Ω—ã —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º–∏ —Å—Ç–∞–≤–∫–∞–º–∏

### Phase 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ + –î–µ–ø–ª–æ–π
- E2E —Ç–µ—Å—Ç—ã
- Railway deployment

---

## üí¨ –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–í—ã –∑–∞–º–µ—Ç–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏:**
1. –°–ø–µ—Ü–∏–∞–ª—å–Ω–æ –æ—Ç–∫—Ä–æ–µ—Ç–µ DevTools –∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –ª–æ–≥–∏ (—Ç–∞–º –±—É–¥–µ—Ç "V3")
2. –ü–æ–ø—Ä–æ–±—É–µ—Ç–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–Ω—å—à–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏ (–æ–Ω–∏ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç!)

**–í—Å—ë –æ—Å—Ç–∞–ª—å–Ω–æ–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ä–∞–Ω—å—à–µ, —Ç–æ–ª—å–∫–æ —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–µ–µ! üéâ**

---

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Å–ø—Ä–∞–≤–∫–∞

### –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `static/js/v2/useCalculationV3.js` (NEW) - 230 —Å—Ç—Ä–æ–∫
- `static/js/v2/PriceCalculatorAppV2.js` - 2 –º–µ—Ç–æ–¥–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
- `index_v2.html` - –¥–æ–±–∞–≤–ª–µ–Ω 1 script tag

### –ó–∞—Ç—Ä–æ–Ω—É—Ç—ã–µ –º–µ—Ç–æ–¥—ã:
- `performCalculation()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `v3.calculate()`
- `loadCategories()` - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `v3.getCategories()`

### –ë–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π:
- –í—Å–µ Vue –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (RouteEditorV2, HistoryPanelV2, etc.)
- –í—Å–µ —Å—Ç–∏–ª–∏ –∏ CSS
- HTML —Ä–∞–∑–º–µ—Ç–∫–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π flow

---

**–í—ã–≤–æ–¥:** –ú—ã —Å–¥–µ–ª–∞–ª–∏ –±–æ–ª—å—à—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—É—é —Ä–∞–±–æ—Ç—É, –Ω–æ UI –æ—Å—Ç–∞–ª—Å—è –ø—Ä–µ–∂–Ω–∏–º. –≠—Ç–æ —Ö–æ—Ä–æ—à–∏–π –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã–π –ø–æ–¥—Ö–æ–¥! üöÄ

