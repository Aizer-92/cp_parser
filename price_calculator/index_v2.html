<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Price Calculator V2</title>
    
    <!-- Vue 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    
    <!-- Axios -->
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: #f3f4f6;
            color: #111827;
        }
        
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        
        input[type="number"] {
            -moz-appearance: textfield;
        }
        
        button:hover:not(:disabled) {
            opacity: 0.9;
        }
        
        button:active:not(:disabled) {
            transform: scale(0.98);
        }
    </style>
</head>
<body>
    <div id="app"></div>
    
    <!-- Компоненты V2 -->
    <script src="/static/js/v2/ProductFormV2.js"></script>
    <script src="/static/js/v2/LogisticsSettingsModal.js"></script>
    <script src="/static/js/v2/RouteDetailsV2.js"></script>
    <!-- Миксин для редактора маршрутов (утилиты) -->
    <script src="/static/js/v2/RouteEditorMixin.js"></script>
    <script src="/static/js/v2/RouteEditorV2.js"></script>
    <!-- V3 API Composable -->
    <script src="/static/js/v2/useCalculationV3.js"></script>
    <script src="/static/js/v2/HistoryPanelV2.js"></script>
    <script src="/static/js/v2/CategoriesPanelV2.js"></script>
    <script src="/static/js/v2/SettingsPanelV2.js"></script>
    <script src="/static/js/v2/PriceCalculatorAppV2.js"></script>
    
    <!-- Инициализация приложения -->
    <script>
        const { createApp } = Vue;
        
        // Проверяем что все компоненты загружены
        if (!window.ProductFormV2) {
            console.error('ProductFormV2 не загружен!');
        }
        if (!window.LogisticsSettingsModal) {
            console.error('LogisticsSettingsModal не загружен!');
        }
        if (!window.RouteDetailsV2) {
            console.error('RouteDetailsV2 не загружен!');
        }
        if (!window.PriceCalculatorAppV2) {
            console.error('PriceCalculatorAppV2 не загружен!');
        }
        
        const app = createApp(window.PriceCalculatorAppV2);
        
        // Регистрируем компоненты глобально
        app.component('ProductFormV2', window.ProductFormV2);
        app.component('LogisticsSettingsModal', window.LogisticsSettingsModal);
        app.component('RouteDetailsV2', window.RouteDetailsV2);
        app.component('RouteEditorV2', window.RouteEditorV2);
        app.component('HistoryPanelV2', window.HistoryPanelV2);
        app.component('CategoriesPanelV2', window.CategoriesPanelV2);
        app.component('SettingsPanelV2', window.SettingsPanelV2);
        app.component('PriceCalculatorAppV2', window.PriceCalculatorAppV2);
        
        app.mount('#app');
        
        console.log('Price Calculator V2 запущен!');
        console.log('Компоненты зарегистрированы:', Object.keys(app._context.components));
    </script>
</body>
</html>

